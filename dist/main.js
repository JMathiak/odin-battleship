(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{pS:()=>p,$N:()=>m,IE:()=>y,EA:()=>h});let t=[{name:"Carrier",length:5,placed:!1},{name:"Battleship",length:4,placed:!1},{name:"Cruiser",length:3,placed:!1},{name:"Submarine",length:3,placed:!1},{name:"Destroyer",length:2,placed:!1}],o=0;function r(e){let t=document.getElementById(e),o=["A","B","C","D","E","F","G"];for(let e=0;e<8;e++){let r=document.createElement("div");if(r.className="row",r.setAttribute("Y-Cord",e-1),0==e){let e=document.createElement("div");e.className="box",e.innerText="Y/X ",r.appendChild(e)}for(let t=0;t<8;t++){let n=document.createElement("div");n.className="box",0==e?7!==t&&(n.innerText=o[t],n.innerText+="("+t+")"):0==t&&(n.innerText=e-1),7==t&&0==e||(n.setAttribute("X-Cord",t-1),r.appendChild(n))}t.appendChild(r)}console.log(t.getElementsByClassName("row")[1].childNodes[0])}function n(){console.log(h);let e=document.getElementById("player").getElementsByClassName("row");for(let t=1;t<e.length;t++){let o=e[t],r=o.getAttribute("y-cord");for(let e=1;e<o.childNodes.length;e++){let t=o.childNodes[e],n=t.getAttribute("x-cord");"empty"==h.board.board[r][n]&&t.addEventListener("click",l)}}}function l(){let e=document.querySelector('input[name = "direction"]:checked').value;console.log(e),console.log(event.target),console.log(event.target.parentNode.getAttribute("y-cord")),console.log("xcord",event.target.getAttribute("x-cord")),1==h.board.placeShip(e,t[o].name,t[o].length,event.target.parentNode.getAttribute("y-cord"),event.target.getAttribute("x-cord"))&&function(e,t,r){let a=document.getElementById(e).getElementsByClassName("row");console.log(a[1].childNodes);for(let e=1;e<a.length;e++){let o=a[e],r=o.getAttribute("y-cord");for(let e=1;e<o.childNodes.length;e++){let n=o.childNodes[e],l=n.getAttribute("x-cord");"empty"!==t.board.board[r][l]&&"miss"!==t.board.board[r][l]&&n.classList.add("ship")}}!function(){let e=document.getElementById("player").getElementsByClassName("row");for(let t=1;t<e.length;t++){let o=e[t];for(let e=1;e<o.childNodes.length;e++)o.childNodes[e].removeEventListener("click",l)}}(),o++,o<5&&n(),5==o&&(y=!0,console.log("here"))}("player",h)}function a(){let e=event.target.parentNode.getAttribute("y-cord"),t=event.target.getAttribute("x-cord"),o='[y-Cord="'+e+'"]',r='[x-Cord="'+t+'"]',n=document.getElementById("guess").querySelectorAll(o)[0].querySelectorAll(r)[0];if(p.board.receiveAttack(e,t),"miss"==p.board.board[e][t]?n.classList.add("miss"):"empty"!=p.board.board[e][t]&&n.classList.add("hit"),1==p.board.checkForAllSunk())return void i("User");let l=Math.floor(7*Math.random()),a=Math.floor(7*Math.random());for(;!h.board.receiveAttack(a,l);)l=Math.floor(7*Math.random()),a=Math.floor(7*Math.random());let d='[y-cord="'+a+'"]',s='[x-cord="'+l+'"]',c=document.getElementById("player").querySelectorAll(d)[0].querySelectorAll(s)[0];"miss"==h.board.board[a][l]?c.classList.add("miss"):"empty"!=p.board.board[e][t]&&c.classList.add("hit"),1!=h.board.checkForAllSunk()||i("Computer")}function i(e){let t=document.getElementById("display-winner-modal"),o=document.getElementById("winner-modal-text");t.style.display="block",o.innerHTML="The winner is the "+e}const d=function(){var e={ships:[],board:[["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"]],checkForValidPlacement:function(e){let t=e.startingCord.startingXCord,o=e.startingCord.startingYCord,r=e.endingCord.endingXCord,n=e.endingCord.endingYCord;if(console.log(t,o,r,n),"vertical"==e.direction){if(6==o)return!1;if(n>6)return console.log(e.name,n),!1;for(let r=o;r<=n;r++)if(console.log(e.name,this.board[r][t]),"empty"!=this.board[r][t])return!1}else if("horizontal"==e.direction){if(6==t)return!1;if(r>6)return!1;for(let n=t;n<=r;n++)if(console.log(e.name,this.board[o][n]),"empty"!=this.board[o][n])return!1}return!0},placeShip:function(t,o,r,n,l){let a={},i={startingXCord:l,startingYCord:n};"horizontal"==t?(a.endingXCord=parseInt(l)+r-1,a.endingYCord=n):"vertical"==t&&(a.endingXCord=l,a.endingYCord=parseInt(n)+r-1);let d=function(e,t,o,r,n){var l={};if(l.name=e,l.length=o,l.startingCord=r,l.endingCord=n,l.health=[],l.sunk=!1,l.direction=t,"horizontal"==t)for(let e=0;e<=o;e++)l.health.push({shipPoint:e,hitStatus:"false",coordinates:{xCord:parseInt(r.startingXCord)+e,yCord:parseInt(r.startingYCord)}});else if("vertical"==t)for(let e=0;e<=o;e++)l.health.push({shipPoint:e,hitStatus:"false",coordinates:{xCord:r.startingXCord,yCord:parseInt(r.startingYCord)+e}});return l.isSunk=function(){for(let e=0;e<this.length;e++)if("false"==this.health[e].hitStatus)return!1;return this.sunk=!0,!0},l.hit=function(e){this.health[e].hitStatus="true"},l}(o,t,r,i,a);if(0==this.checkForValidPlacement(d))return!1;if(e.ships.push(d),"horizontal"==t)for(let e=0;e<r;e++){let t={name:d.name,spot:d.health[e]};console.log(parseInt(l)+e),this.board[n][parseInt(l)+e]=t}else if("vertical"==t)for(let e=0;e<r;e++){let t={name:d.name,spot:d.health[e]};this.board[parseInt(n)+e][l]=t}return!0},receiveAttack:function(e,t){if("empty"!==this.board[e][t]&&"miss"!==this.board[e][t]){let o=this.board[e][t].name,r=this.ships.filter((e=>e.name==o))[0];console.log(r),console.log("Received X Cord",t),console.log("Received Y Cord",e);let n=r.health.filter((o=>o.coordinates.xCord==t&&o.coordinates.yCord==e));return console.log(o),console.log(n),r.hit(n[0].shipPoint),r.isSunk(),!0}return"empty"==this.board[e][t]?(this.board[e][t]="miss",!0):"miss"!=this.board[e][t]&&"true"!=this.board[e][t].spot.hitStatus},checkForAllSunk:function(){for(let e=0;e<this.ships.length;e++)if(0==this.ships[e].sunk)return!1;return!0}};return e},s=function(e){let t={};return t.type=e,t.board=d(),t};function c(){1==y?(function(){let e=["horizontal","vertical"],t=Math.floor(7*Math.random()),o=Math.floor(7*Math.random()),r=Math.floor(2*Math.random());for(let n=0;n<ships.length;n++){for(;!p.board.placeShip(e[r],ships[n].name,ships[n].length,o,t);)t=Math.floor(7*Math.random()),o=Math.floor(7*Math.random()),r=Math.floor(2*Math.random());console.log(ships[n].name,"placed")}console.log(p.board.board)}(),function(){let e=document.getElementById("guess").getElementsByClassName("row");for(let t=1;t<e.length;t++){let o=e[t];o.getAttribute("y-cord");for(let e=1;e<o.childNodes.length;e++){let t=o.childNodes[e];t.getAttribute("x-cord"),t.addEventListener("click",a)}}}()):setTimeout(c,500)}function m(){!function(){o=0;let e=document.getElementById("player"),t=document.getElementById("guess");for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)t.removeChild(t.firstChild)}(),function(){for(let e=0;e<7;e++)for(let t=0;t<7;t++)h.board.board[e][t]="empty",p.board.board[e][t]="empty"}(),y=!1,r("player"),n(),r("guess"),c()}!function(){let e=document.getElementById("play-again"),t=document.getElementById("display-modal"),o=document.getElementById("okay-button"),r=document.getElementById("play-again-modal"),n=document.getElementById("display-winner-modal");e.addEventListener("click",m),t.addEventListener("click",i),o.addEventListener("click",(function(){n.style.display="none"})),r.addEventListener("click",(function(){n.style.display="none",m()})),window.onclick=function(e){e.target==n&&(n.style.display="none")}}();let h=s("human"),p=s("computer"),y=!1;r("player"),n(),r("guess"),c(),exports.createShip=createShip,exports.createGameBoard=createGameBoard,exports.gameLoop=gameLoop})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1BLE1BQU1yQixHQUFHUSxHQUFLLFFBYjdCcUcsR0FDQXhFLEdBQWMsRUFDZDNDLEVBQVksVUFDWm1CLElBQ0FuQixFQUFZLFNBQ1p3RyxLSmtMRixXQUNFLElBQUlZLEVBQVNqSCxTQUFTQyxlQUFlLGNBQ2pDaUgsRUFBVWxILFNBQVNDLGVBQWUsaUJBQ2xDa0gsRUFBVW5ILFNBQVNDLGVBQWUsZUFDbENtSCxFQUFVcEgsU0FBU0MsZUFBZSxvQkFDbEM2RCxFQUFROUQsU0FBU0MsZUFBZSx3QkFDcENnSCxFQUFPeEYsaUJBQWlCLFFBQVNpRixHQUNqQ1EsRUFBUXpGLGlCQUFpQixRQUFTMkIsR0FDbEMrRCxFQUFRMUYsaUJBQWlCLFNBQVMsV0FDaENxQyxFQUFNQyxNQUFNQyxRQUFVLFVBR3hCb0QsRUFBUTNGLGlCQUFpQixTQUFTLFdBQ2hDcUMsRUFBTUMsTUFBTUMsUUFBVSxPQUN0QjBDLE9BR0ZXLE9BQU9DLFFBQVUsU0FBVXhGLEdBQ3JCQSxFQUFNQyxRQUFVK0IsSUFDbEJBLEVBQU1DLE1BQU1DLFFBQVUsU0l6TDVCdUQsR0FDQSxJQUFJdEcsRUFBTyxFQUFhLFNBQ3BCZ0MsRUFBTyxFQUFhLFlBRXBCVCxHQUFjLEVBN0JoQjNDLEVBQVksVUFDWm1CLElBQ0FuQixFQUFZLFNBQ1p3RyxJQWtFRnpILFFBQVE0SSxXQUFhQSxXQUNyQjVJLFFBQVE2SSxnQkFBa0JBLGdCQUMxQjdJLFFBQVE4SSxTQUFXQSxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvYm9hcmQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvc2hpcC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcGxheWVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IHVzZXIsIGNvbXAsIHNoaXBzUGxhY2VkLCBwbGF5QWdhaW4gfSBmcm9tIFwiLi4vaW5kZXguanNcIjtcclxuXHJcbmxldCBzaGlwcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkNhcnJpZXJcIixcclxuICAgIGxlbmd0aDogNSxcclxuICAgIHBsYWNlZDogZmFsc2UsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhdHRsZXNoaXBcIixcclxuICAgIGxlbmd0aDogNCxcclxuICAgIHBsYWNlZDogZmFsc2UsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkNydWlzZXJcIixcclxuICAgIGxlbmd0aDogMyxcclxuICAgIHBsYWNlZDogZmFsc2UsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlN1Ym1hcmluZVwiLFxyXG4gICAgbGVuZ3RoOiAzLFxyXG4gICAgcGxhY2VkOiBmYWxzZSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiRGVzdHJveWVyXCIsXHJcbiAgICBsZW5ndGg6IDIsXHJcbiAgICBwbGFjZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbl07XHJcbmxldCBzaGlwSW5kZXggPSAwO1xyXG5mdW5jdGlvbiBlbXB0eVJlbmRlcihkaXYpIHtcclxuICBsZXQgcGFyZW50RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2KTtcclxuICBsZXQgcm93QXJyID0gW1wiQVwiLCBcIkJcIiwgXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCIsIFwiR1wiXTtcclxuICAvL091dGVyIGxvb3AgaXMgcm93cywgaW5uZXIgbG9vcCBpcyBjb2x1bW5zXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcclxuICAgIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgcm93LmNsYXNzTmFtZSA9IFwicm93XCI7XHJcbiAgICByb3cuc2V0QXR0cmlidXRlKFwiWS1Db3JkXCIsIGkgLSAxKTtcclxuICAgIGlmIChpID09IDApIHtcclxuICAgICAgbGV0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgIGJveC5jbGFzc05hbWUgPSBcImJveFwiO1xyXG4gICAgICBib3guaW5uZXJUZXh0ID0gXCJZL1ggXCI7XHJcbiAgICAgIHJvdy5hcHBlbmRDaGlsZChib3gpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqKyspIHtcclxuICAgICAgbGV0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgIGJveC5jbGFzc05hbWUgPSBcImJveFwiO1xyXG4gICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgaWYgKGogIT09IDcpIHtcclxuICAgICAgICAgIGJveC5pbm5lclRleHQgPSByb3dBcnJbal07XHJcbiAgICAgICAgICBib3guaW5uZXJUZXh0ICs9IFwiKFwiICsgaiArIFwiKVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChqID09IDApIHtcclxuICAgICAgICBib3guaW5uZXJUZXh0ID0gaSAtIDE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChqID09IDcgJiYgaSA9PSAwKSB7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYm94LnNldEF0dHJpYnV0ZShcIlgtQ29yZFwiLCBqIC0gMSk7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGJveCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHBhcmVudERpdi5hcHBlbmRDaGlsZChyb3cpO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZyhwYXJlbnREaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJvd1wiKVsxXS5jaGlsZE5vZGVzWzBdKTtcclxufVxyXG5mdW5jdGlvbiBkZWxldGVCb2FyZChkaXYpIHtcclxuICBsZXQgcGFyZW50RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQWRkU2hpcHMoKSB7XHJcbiAgbGV0IHBhcmVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyXCIpO1xyXG4gIGxldCByb3dzID0gcGFyZW50RGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyb3dcIik7XHJcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgY3VyUm93ID0gcm93c1tpXTtcclxuICAgIGZvciAobGV0IGogPSAxOyBqIDwgY3VyUm93LmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgbGV0IGN1ckJveCA9IGN1clJvdy5jaGlsZE5vZGVzW2pdO1xyXG4gICAgICBjdXJCb3gucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uQWRkU2hpcENsaWNrKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuZnVuY3Rpb24gcmVmcmVzaEJvYXJkKGRpdiwgcGxheWVyLCBzaGlwKSB7XHJcbiAgbGV0IHBhcmVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdik7XHJcbiAgbGV0IHJvd3MgPSBwYXJlbnREaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJvd1wiKTtcclxuICBjb25zb2xlLmxvZyhyb3dzWzFdLmNoaWxkTm9kZXMpO1xyXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IGN1clJvdyA9IHJvd3NbaV07XHJcbiAgICBsZXQgY3VyWUNvcmQgPSBjdXJSb3cuZ2V0QXR0cmlidXRlKFwieS1jb3JkXCIpO1xyXG4gICAgZm9yIChsZXQgaiA9IDE7IGogPCBjdXJSb3cuY2hpbGROb2Rlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICBsZXQgY3VyQm94ID0gY3VyUm93LmNoaWxkTm9kZXNbal07XHJcbiAgICAgIGxldCBjdXJYQ29yZCA9IGN1ckJveC5nZXRBdHRyaWJ1dGUoXCJ4LWNvcmRcIik7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBwbGF5ZXIuYm9hcmQuYm9hcmRbY3VyWUNvcmRdW2N1clhDb3JkXSAhPT0gXCJlbXB0eVwiICYmXHJcbiAgICAgICAgcGxheWVyLmJvYXJkLmJvYXJkW2N1cllDb3JkXVtjdXJYQ29yZF0gIT09IFwibWlzc1wiXHJcbiAgICAgICkge1xyXG4gICAgICAgIGN1ckJveC5jbGFzc0xpc3QuYWRkKFwic2hpcFwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZW1vdmVBZGRTaGlwcygpO1xyXG4gIHNoaXBJbmRleCsrO1xyXG4gIGlmIChzaGlwSW5kZXggPCA1KSB7XHJcbiAgICBwbGFjZVNoaXBMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgaWYgKHNoaXBJbmRleCA9PSA1KSB7XHJcbiAgICBzaGlwc1BsYWNlZCA9IHRydWU7XHJcbiAgICBjb25zb2xlLmxvZyhcImhlcmVcIik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwbGFjZVNoaXBMaXN0ZW5lcnMoKSB7XHJcbiAgY29uc29sZS5sb2codXNlcik7XHJcbiAgbGV0IHBhcmVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyXCIpO1xyXG4gIGxldCByb3dzID0gcGFyZW50RGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyb3dcIik7XHJcbiAgLy9sZXQgZGlyZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpcmVjdGlvbi1yYWRpbycpLnZhbHVlO1xyXG4gIGxldCBkaXJlY3Rpb24gPSBcImhvcml6b250YWxcIjtcclxuICAvL091dGVyIGl0ZXJhdGVzIHRocm91Z2ggcm93cywgaW5uZXIgdGhyb3VnaCBib3hlcyBpbiByb3dcclxuICBmb3IgKGxldCBpID0gMTsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCBjdXJSb3cgPSByb3dzW2ldO1xyXG4gICAgbGV0IGN1cllDb3JkID0gY3VyUm93LmdldEF0dHJpYnV0ZShcInktY29yZFwiKTtcclxuICAgIGZvciAobGV0IGogPSAxOyBqIDwgY3VyUm93LmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgbGV0IGN1ckJveCA9IGN1clJvdy5jaGlsZE5vZGVzW2pdO1xyXG4gICAgICBsZXQgY3VyWENvcmQgPSBjdXJCb3guZ2V0QXR0cmlidXRlKFwieC1jb3JkXCIpO1xyXG4gICAgICBpZiAodXNlci5ib2FyZC5ib2FyZFtjdXJZQ29yZF1bY3VyWENvcmRdID09IFwiZW1wdHlcIikge1xyXG4gICAgICAgIGN1ckJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25BZGRTaGlwQ2xpY2spO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbkFkZFNoaXBDbGljaygpIHtcclxuICBsZXQgZGlyZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICdpbnB1dFtuYW1lID0gXCJkaXJlY3Rpb25cIl06Y2hlY2tlZCdcclxuICApLnZhbHVlO1xyXG4gIGNvbnNvbGUubG9nKGRpcmVjdGlvbik7XHJcbiAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcclxuICBjb25zb2xlLmxvZyhldmVudC50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJ5LWNvcmRcIikpO1xyXG4gIGNvbnNvbGUubG9nKFwieGNvcmRcIiwgZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcIngtY29yZFwiKSk7XHJcbiAgaWYgKFxyXG4gICAgdXNlci5ib2FyZC5wbGFjZVNoaXAoXHJcbiAgICAgIGRpcmVjdGlvbixcclxuICAgICAgc2hpcHNbc2hpcEluZGV4XS5uYW1lLFxyXG4gICAgICBzaGlwc1tzaGlwSW5kZXhdLmxlbmd0aCxcclxuICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwieS1jb3JkXCIpLFxyXG4gICAgICBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwieC1jb3JkXCIpXHJcbiAgICApID09IHRydWVcclxuICApIHtcclxuICAgIHJlZnJlc2hCb2FyZChcInBsYXllclwiLCB1c2VyKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGd1ZXNzQ2xpY2soKSB7XHJcbiAgbGV0IHVzZXJZR3Vlc3MgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJ5LWNvcmRcIik7XHJcbiAgbGV0IHVzZXJYR3Vlc3MgPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwieC1jb3JkXCIpO1xyXG4gIGxldCB1c2VyWVF1ZXJ5ID0gYFt5LUNvcmQ9XCJgICsgdXNlcllHdWVzcyArIGBcIl1gO1xyXG4gIGxldCB1c2VyWFF1ZXJ5ID0gYFt4LUNvcmQ9XCJgICsgdXNlclhHdWVzcyArIGBcIl1gO1xyXG4gIGxldCB1c2VyQm94T2ZJbnRlcmVzdCA9IGRvY3VtZW50XHJcbiAgICAuZ2V0RWxlbWVudEJ5SWQoXCJndWVzc1wiKVxyXG4gICAgLnF1ZXJ5U2VsZWN0b3JBbGwodXNlcllRdWVyeSlbMF1cclxuICAgIC5xdWVyeVNlbGVjdG9yQWxsKHVzZXJYUXVlcnkpWzBdO1xyXG5cclxuICBjb21wLmJvYXJkLnJlY2VpdmVBdHRhY2sodXNlcllHdWVzcywgdXNlclhHdWVzcyk7XHJcbiAgaWYgKGNvbXAuYm9hcmQuYm9hcmRbdXNlcllHdWVzc11bdXNlclhHdWVzc10gPT0gXCJtaXNzXCIpIHtcclxuICAgIHVzZXJCb3hPZkludGVyZXN0LmNsYXNzTGlzdC5hZGQoXCJtaXNzXCIpO1xyXG4gIH0gZWxzZSBpZiAoY29tcC5ib2FyZC5ib2FyZFt1c2VyWUd1ZXNzXVt1c2VyWEd1ZXNzXSAhPSBcImVtcHR5XCIpIHtcclxuICAgIHVzZXJCb3hPZkludGVyZXN0LmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XHJcbiAgfVxyXG4gIGlmIChjb21wLmJvYXJkLmNoZWNrRm9yQWxsU3VuaygpID09IHRydWUpIHtcclxuICAgIGRpc3BsYXlNb2RhbChcIlVzZXJcIik7XHJcbiAgICAvL01ldGhvZCB0byByZW1vdmUgYWxsIGxpc3RlbmVyc1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgbGV0IGNvbXBYR3Vlc3MgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICBsZXQgY29tcFlHdWVzcyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gIHdoaWxlICghdXNlci5ib2FyZC5yZWNlaXZlQXR0YWNrKGNvbXBZR3Vlc3MsIGNvbXBYR3Vlc3MpKSB7XHJcbiAgICBjb21wWEd1ZXNzID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgICBjb21wWUd1ZXNzID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgfVxyXG5cclxuICBsZXQgY29tcFlRdWVyeSA9IGBbeS1jb3JkPVwiYCArIGNvbXBZR3Vlc3MgKyBgXCJdYDtcclxuICBsZXQgY29tcFhRdWVyeSA9IGBbeC1jb3JkPVwiYCArIGNvbXBYR3Vlc3MgKyBgXCJdYDtcclxuICBsZXQgY29tcEJveE9mSW50ZXJlc3QgPSBkb2N1bWVudFxyXG4gICAgLmdldEVsZW1lbnRCeUlkKFwicGxheWVyXCIpXHJcbiAgICAucXVlcnlTZWxlY3RvckFsbChjb21wWVF1ZXJ5KVswXVxyXG4gICAgLnF1ZXJ5U2VsZWN0b3JBbGwoY29tcFhRdWVyeSlbMF07XHJcblxyXG4gIGlmICh1c2VyLmJvYXJkLmJvYXJkW2NvbXBZR3Vlc3NdW2NvbXBYR3Vlc3NdID09IFwibWlzc1wiKSB7XHJcbiAgICBjb21wQm94T2ZJbnRlcmVzdC5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcclxuICB9IGVsc2UgaWYgKGNvbXAuYm9hcmQuYm9hcmRbdXNlcllHdWVzc11bdXNlclhHdWVzc10gIT0gXCJlbXB0eVwiKSB7XHJcbiAgICBjb21wQm94T2ZJbnRlcmVzdC5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xyXG4gIH1cclxuICBpZiAodXNlci5ib2FyZC5jaGVja0ZvckFsbFN1bmsoKSA9PSB0cnVlKSB7XHJcbiAgICBkaXNwbGF5TW9kYWwoXCJDb21wdXRlclwiKTtcclxuICAgIC8vTWV0aG9kIHRvIHJlbW92ZSBhbGwgbGlzdGVuZXJzXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRHdWVzc0NsaWNrKCkge1xyXG4gIGxldCBwYXJlbnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImd1ZXNzXCIpO1xyXG4gIGxldCByb3dzID0gcGFyZW50RGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyb3dcIik7XHJcbiAgLy9sZXQgZGlyZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpcmVjdGlvbi1yYWRpbycpLnZhbHVlO1xyXG4gIC8vT3V0ZXIgaXRlcmF0ZXMgdGhyb3VnaCByb3dzLCBpbm5lciB0aHJvdWdoIGJveGVzIGluIHJvd1xyXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IGN1clJvdyA9IHJvd3NbaV07XHJcbiAgICBsZXQgY3VyWUNvcmQgPSBjdXJSb3cuZ2V0QXR0cmlidXRlKFwieS1jb3JkXCIpO1xyXG4gICAgZm9yIChsZXQgaiA9IDE7IGogPCBjdXJSb3cuY2hpbGROb2Rlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICBsZXQgY3VyQm94ID0gY3VyUm93LmNoaWxkTm9kZXNbal07XHJcbiAgICAgIGxldCBjdXJYQ29yZCA9IGN1ckJveC5nZXRBdHRyaWJ1dGUoXCJ4LWNvcmRcIik7XHJcbiAgICAgIGN1ckJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZ3Vlc3NDbGljayk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhckJvYXJkcygpIHtcclxuICBzaGlwSW5kZXggPSAwO1xyXG4gIGxldCB1c2VyQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllclwiKTtcclxuICBsZXQgZ3Vlc3NCb2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3Vlc3NcIik7XHJcbiAgd2hpbGUgKHVzZXJCb2FyZC5maXJzdENoaWxkKSB7XHJcbiAgICB1c2VyQm9hcmQucmVtb3ZlQ2hpbGQodXNlckJvYXJkLmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxuICB3aGlsZSAoZ3Vlc3NCb2FyZC5maXJzdENoaWxkKSB7XHJcbiAgICBndWVzc0JvYXJkLnJlbW92ZUNoaWxkKGd1ZXNzQm9hcmQuZmlyc3RDaGlsZCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5TW9kYWwod2lubmVyKSB7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXNwbGF5LXdpbm5lci1tb2RhbFwiKTtcclxuICBsZXQgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aW5uZXItbW9kYWwtdGV4dFwiKTtcclxuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIGRpdi5pbm5lckhUTUwgPSBcIlRoZSB3aW5uZXIgaXMgdGhlIFwiICsgd2lubmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplQnV0dG9uKCkge1xyXG4gIGxldCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXktYWdhaW5cIik7XHJcbiAgbGV0IGJ1dHRvbjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpc3BsYXktbW9kYWxcIik7XHJcbiAgbGV0IGJ1dHRvbjMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9rYXktYnV0dG9uXCIpO1xyXG4gIGxldCBidXR0b240ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5LWFnYWluLW1vZGFsXCIpO1xyXG4gIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzcGxheS13aW5uZXItbW9kYWxcIik7XHJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwbGF5QWdhaW4pO1xyXG4gIGJ1dHRvbjIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRpc3BsYXlNb2RhbCk7XHJcbiAgYnV0dG9uMy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH0pO1xyXG5cclxuICBidXR0b240LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBwbGF5QWdhaW4oKTtcclxuICB9KTtcclxuXHJcbiAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIHtcclxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgZW1wdHlSZW5kZXIsXHJcbiAgcGxhY2VTaGlwTGlzdGVuZXJzLFxyXG4gIGFkZEd1ZXNzQ2xpY2ssXHJcbiAgY2xlYXJCb2FyZHMsXHJcbiAgaW5pdGlhbGl6ZUJ1dHRvbixcclxufTtcclxuIiwiZnVuY3Rpb24gY3JlYXRlU2hpcChuYW1lLCBkaXJlY3Rpb24sIGxlbmd0aCwgc3RhcnRpbmdDb3JkLCBlbmRpbmdDb3JkKSB7XHJcbiAgdmFyIHNoaXAgPSB7fTtcclxuICBzaGlwLm5hbWUgPSBuYW1lO1xyXG4gIHNoaXAubGVuZ3RoID0gbGVuZ3RoO1xyXG4gIHNoaXAuc3RhcnRpbmdDb3JkID0gc3RhcnRpbmdDb3JkO1xyXG4gIHNoaXAuZW5kaW5nQ29yZCA9IGVuZGluZ0NvcmQ7XHJcbiAgc2hpcC5oZWFsdGggPSBbXTtcclxuICBzaGlwLnN1bmsgPSBmYWxzZTtcclxuICBzaGlwLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuXHJcbiAgaWYgKGRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbGVuZ3RoOyBpKyspIHtcclxuICAgICAgc2hpcC5oZWFsdGgucHVzaCh7XHJcbiAgICAgICAgc2hpcFBvaW50OiBpLFxyXG4gICAgICAgIGhpdFN0YXR1czogXCJmYWxzZVwiLFxyXG4gICAgICAgIGNvb3JkaW5hdGVzOiB7XHJcbiAgICAgICAgICB4Q29yZDogcGFyc2VJbnQoc3RhcnRpbmdDb3JkLnN0YXJ0aW5nWENvcmQpICsgaSxcclxuICAgICAgICAgIHlDb3JkOiBwYXJzZUludChzdGFydGluZ0NvcmQuc3RhcnRpbmdZQ29yZCksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gXCJ2ZXJ0aWNhbFwiKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBsZW5ndGg7IGkrKykge1xyXG4gICAgICBzaGlwLmhlYWx0aC5wdXNoKHtcclxuICAgICAgICBzaGlwUG9pbnQ6IGksXHJcbiAgICAgICAgaGl0U3RhdHVzOiBcImZhbHNlXCIsXHJcbiAgICAgICAgY29vcmRpbmF0ZXM6IHtcclxuICAgICAgICAgIHhDb3JkOiBzdGFydGluZ0NvcmQuc3RhcnRpbmdYQ29yZCxcclxuICAgICAgICAgIHlDb3JkOiBwYXJzZUludChzdGFydGluZ0NvcmQuc3RhcnRpbmdZQ29yZCkgKyBpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2hpcC5pc1N1bmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgaWYgKHRoaXMuaGVhbHRoW2pdLmhpdFN0YXR1cyA9PSBcImZhbHNlXCIpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuc3VuayA9IHRydWU7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9O1xyXG5cclxuICBzaGlwLmhpdCA9IGZ1bmN0aW9uIChoaXRQb2ludCkge1xyXG4gICAgdGhpcy5oZWFsdGhbaGl0UG9pbnRdLmhpdFN0YXR1cyA9IFwidHJ1ZVwiO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBzaGlwO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaGlwO1xyXG4iLCJpbXBvcnQgY3JlYXRlU2hpcCBmcm9tIFwiLi9zaGlwXCI7XHJcbmZ1bmN0aW9uIGNyZWF0ZUdhbWVCb2FyZCgpIHtcclxuICB2YXIgZ2FtZUJvYXJkID0ge307XHJcbiAgZ2FtZUJvYXJkLnNoaXBzID0gW107XHJcbiAgZ2FtZUJvYXJkLmJvYXJkID0gW1xyXG4gICAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgXTtcclxuXHJcbiAgZ2FtZUJvYXJkLmNoZWNrRm9yVmFsaWRQbGFjZW1lbnQgPSBmdW5jdGlvbiAoc2hpcFRvUGxhY2UpIHtcclxuICAgIGxldCBzdGFydGluZ0NvbHVtbiA9IHNoaXBUb1BsYWNlLnN0YXJ0aW5nQ29yZC5zdGFydGluZ1hDb3JkO1xyXG4gICAgbGV0IHN0YXJ0aW5nUm93ID0gc2hpcFRvUGxhY2Uuc3RhcnRpbmdDb3JkLnN0YXJ0aW5nWUNvcmQ7XHJcbiAgICBsZXQgZW5kaW5nQ29sdW1uID0gc2hpcFRvUGxhY2UuZW5kaW5nQ29yZC5lbmRpbmdYQ29yZDtcclxuICAgIGxldCBlbmRpbmdSb3cgPSBzaGlwVG9QbGFjZS5lbmRpbmdDb3JkLmVuZGluZ1lDb3JkO1xyXG4gICAgY29uc29sZS5sb2coc3RhcnRpbmdDb2x1bW4sIHN0YXJ0aW5nUm93LCBlbmRpbmdDb2x1bW4sIGVuZGluZ1Jvdyk7XHJcbiAgICBpZiAoc2hpcFRvUGxhY2UuZGlyZWN0aW9uID09IFwidmVydGljYWxcIikge1xyXG4gICAgICBpZiAoc3RhcnRpbmdSb3cgPT0gNikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZW5kaW5nUm93ID4gNikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHNoaXBUb1BsYWNlLm5hbWUsIGVuZGluZ1Jvdyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGkgPSBzdGFydGluZ1JvdzsgaSA8PSBlbmRpbmdSb3c7IGkrKykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHNoaXBUb1BsYWNlLm5hbWUsIHRoaXMuYm9hcmRbaV1bc3RhcnRpbmdDb2x1bW5dKTtcclxuICAgICAgICBpZiAodGhpcy5ib2FyZFtpXVtzdGFydGluZ0NvbHVtbl0gIT0gXCJlbXB0eVwiKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHNoaXBUb1BsYWNlLmRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xyXG4gICAgICBpZiAoc3RhcnRpbmdDb2x1bW4gPT0gNikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZW5kaW5nQ29sdW1uID4gNikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBqID0gc3RhcnRpbmdDb2x1bW47IGogPD0gZW5kaW5nQ29sdW1uOyBqKyspIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhzaGlwVG9QbGFjZS5uYW1lLCB0aGlzLmJvYXJkW3N0YXJ0aW5nUm93XVtqXSk7XHJcbiAgICAgICAgaWYgKHRoaXMuYm9hcmRbc3RhcnRpbmdSb3ddW2pdICE9IFwiZW1wdHlcIikge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgZ2FtZUJvYXJkLnBsYWNlU2hpcCA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIG5hbWUsIGxlbmd0aCwgeUNvcmQsIHhDb3JkKSB7XHJcbiAgICBsZXQgZW5kaW5nQ29yZCA9IHt9O1xyXG4gICAgbGV0IHN0YXJ0aW5nQ29yZCA9IHsgc3RhcnRpbmdYQ29yZDogeENvcmQsIHN0YXJ0aW5nWUNvcmQ6IHlDb3JkIH07XHJcblxyXG4gICAgaWYgKGRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xyXG4gICAgICBlbmRpbmdDb3JkLmVuZGluZ1hDb3JkID0gcGFyc2VJbnQoeENvcmQpICsgbGVuZ3RoIC0gMTtcclxuICAgICAgZW5kaW5nQ29yZC5lbmRpbmdZQ29yZCA9IHlDb3JkO1xyXG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gXCJ2ZXJ0aWNhbFwiKSB7XHJcbiAgICAgIGVuZGluZ0NvcmQuZW5kaW5nWENvcmQgPSB4Q29yZDtcclxuICAgICAgZW5kaW5nQ29yZC5lbmRpbmdZQ29yZCA9IHBhcnNlSW50KHlDb3JkKSArIGxlbmd0aCAtIDE7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNoaXAgPSBjcmVhdGVTaGlwKG5hbWUsIGRpcmVjdGlvbiwgbGVuZ3RoLCBzdGFydGluZ0NvcmQsIGVuZGluZ0NvcmQpO1xyXG4gICAgaWYgKHRoaXMuY2hlY2tGb3JWYWxpZFBsYWNlbWVudChzaGlwKSA9PSBmYWxzZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBnYW1lQm9hcmQuc2hpcHMucHVzaChzaGlwKTtcclxuICAgICAgaWYgKGRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBwbGFjZU9iaiA9IHtcclxuICAgICAgICAgICAgbmFtZTogc2hpcC5uYW1lLFxyXG4gICAgICAgICAgICBzcG90OiBzaGlwLmhlYWx0aFtpXSxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhwYXJzZUludCh4Q29yZCkgKyBpKTtcclxuICAgICAgICAgIHRoaXMuYm9hcmRbeUNvcmRdW3BhcnNlSW50KHhDb3JkKSArIGldID0gcGxhY2VPYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInZlcnRpY2FsXCIpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgcGxhY2VPYmogPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IHNoaXAubmFtZSxcclxuICAgICAgICAgICAgc3BvdDogc2hpcC5oZWFsdGhbaV0sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdGhpcy5ib2FyZFtwYXJzZUludCh5Q29yZCkgKyBpXVt4Q29yZF0gPSBwbGFjZU9iajtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH07XHJcblxyXG4gIGdhbWVCb2FyZC5yZWNlaXZlQXR0YWNrID0gZnVuY3Rpb24gKHlDb3JkLCB4Q29yZCkge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZF0gIT09IFwiZW1wdHlcIiAmJlxyXG4gICAgICB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZF0gIT09IFwibWlzc1wiXHJcbiAgICApIHtcclxuICAgICAgbGV0IHNoaXBOYW1lID0gdGhpcy5ib2FyZFt5Q29yZF1beENvcmRdLm5hbWU7XHJcbiAgICAgIGxldCBmaWx0ZXJlZEFyciA9IHRoaXMuc2hpcHMuZmlsdGVyKChzaCkgPT4gc2gubmFtZSA9PSBzaGlwTmFtZSk7XHJcbiAgICAgIGxldCBzaGlwID0gZmlsdGVyZWRBcnJbMF07XHJcbiAgICAgIGNvbnNvbGUubG9nKHNoaXApO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlJlY2VpdmVkIFggQ29yZFwiLCB4Q29yZCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWQgWSBDb3JkXCIsIHlDb3JkKTtcclxuICAgICAgbGV0IHBvaW50QXJyID0gc2hpcC5oZWFsdGguZmlsdGVyKFxyXG4gICAgICAgIChwb2ludCkgPT5cclxuICAgICAgICAgIHBvaW50LmNvb3JkaW5hdGVzLnhDb3JkID09IHhDb3JkICYmIHBvaW50LmNvb3JkaW5hdGVzLnlDb3JkID09IHlDb3JkXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHNoaXBOYW1lKTtcclxuICAgICAgY29uc29sZS5sb2cocG9pbnRBcnIpO1xyXG4gICAgICBzaGlwLmhpdChwb2ludEFyclswXS5zaGlwUG9pbnQpO1xyXG4gICAgICBzaGlwLmlzU3VuaygpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5ib2FyZFt5Q29yZF1beENvcmRdID09IFwiZW1wdHlcIikge1xyXG4gICAgICB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZF0gPSBcIm1pc3NcIjtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZF0gPT0gXCJtaXNzXCIgfHxcclxuICAgICAgdGhpcy5ib2FyZFt5Q29yZF1beENvcmRdLnNwb3QuaGl0U3RhdHVzID09IFwidHJ1ZVwiXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgZ2FtZUJvYXJkLmNoZWNrRm9yQWxsU3VuayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaGlwcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodGhpcy5zaGlwc1tpXS5zdW5rID09IGZhbHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gZ2FtZUJvYXJkO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVHYW1lQm9hcmQ7XHJcbiIsImltcG9ydCBjcmVhdGVHYW1lQm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XHJcbmZ1bmN0aW9uIGNyZWF0ZVBsYXllcih0eXBlKSB7XHJcbiAgbGV0IHBsYXllciA9IHt9O1xyXG4gIHBsYXllci50eXBlID0gdHlwZTtcclxuICBwbGF5ZXIuYm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKTtcclxuXHJcbiAgcmV0dXJuIHBsYXllcjtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUGxheWVyO1xyXG4iLCJpbXBvcnQge1xyXG4gIGVtcHR5UmVuZGVyLFxyXG4gIHBsYWNlU2hpcExpc3RlbmVycyxcclxuICBhZGRHdWVzc0NsaWNrLFxyXG4gIGNsZWFyQm9hcmRzLFxyXG4gIGluaXRpYWxpemVCdXR0b24sXHJcbn0gZnJvbSBcIi4vbW9kdWxlcy9ib2FyZFwiO1xyXG5pbXBvcnQgY3JlYXRlUGxheWVyIGZyb20gXCIuL21vZHVsZXMvcGxheWVyXCI7XHJcblxyXG5mdW5jdGlvbiB3YWl0Rm9yU2hpcHMoKSB7XHJcbiAgaWYgKHNoaXBzUGxhY2VkICE9IHRydWUpIHtcclxuICAgIHNldFRpbWVvdXQod2FpdEZvclNoaXBzLCA1MDApO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBwbGFjZUNvbXB1dGVyU2hpcHMoKTtcclxuICBhZGRHdWVzc0NsaWNrKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsYWNlQ29tcHV0ZXJTaGlwcygpIHtcclxuICBsZXQgZGlyZWN0aW9ucyA9IFtcImhvcml6b250YWxcIiwgXCJ2ZXJ0aWNhbFwiXTtcclxuICBsZXQgeENvcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICBsZXQgeUNvcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICBsZXQgZGlyZWN0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMik7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwcy5sZW5ndGg7IGkrKykge1xyXG4gICAgd2hpbGUgKFxyXG4gICAgICAhY29tcC5ib2FyZC5wbGFjZVNoaXAoXHJcbiAgICAgICAgZGlyZWN0aW9uc1tkaXJlY3Rpb25dLFxyXG4gICAgICAgIHNoaXBzW2ldLm5hbWUsXHJcbiAgICAgICAgc2hpcHNbaV0ubGVuZ3RoLFxyXG4gICAgICAgIHlDb3JkLFxyXG4gICAgICAgIHhDb3JkXHJcbiAgICAgIClcclxuICAgICkge1xyXG4gICAgICB4Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gICAgICB5Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gICAgICBkaXJlY3Rpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHNoaXBzW2ldLm5hbWUsIFwicGxhY2VkXCIpO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZyhjb21wLmJvYXJkLmJvYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0VXBHYW1lKCkge1xyXG4gIGVtcHR5UmVuZGVyKFwicGxheWVyXCIpO1xyXG4gIHBsYWNlU2hpcExpc3RlbmVycygpO1xyXG4gIGVtcHR5UmVuZGVyKFwiZ3Vlc3NcIik7XHJcbiAgd2FpdEZvclNoaXBzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsYXlBZ2FpbigpIHtcclxuICBjbGVhckJvYXJkcygpO1xyXG4gIGNsZWFyQXJyYXlzKCk7XHJcbiAgc2hpcHNQbGFjZWQgPSBmYWxzZTtcclxuICBlbXB0eVJlbmRlcihcInBsYXllclwiKTtcclxuICBwbGFjZVNoaXBMaXN0ZW5lcnMoKTtcclxuICBlbXB0eVJlbmRlcihcImd1ZXNzXCIpO1xyXG4gIHdhaXRGb3JTaGlwcygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhckFycmF5cygpIHtcclxuICAvL091dHRlciByb3dzLCBpbm5lciBjb2x1bW5zXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA3OyBpKyspIHtcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgNzsgaisrKSB7XHJcbiAgICAgIHVzZXIuYm9hcmQuYm9hcmRbaV1bal0gPSBcImVtcHR5XCI7XHJcbiAgICAgIGNvbXAuYm9hcmQuYm9hcmRbaV1bal0gPSBcImVtcHR5XCI7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbmluaXRpYWxpemVCdXR0b24oKTtcclxubGV0IHVzZXIgPSBjcmVhdGVQbGF5ZXIoXCJodW1hblwiKTtcclxubGV0IGNvbXAgPSBjcmVhdGVQbGF5ZXIoXCJjb21wdXRlclwiKTtcclxubGV0IHR1cm5Db3VudCA9IDA7IC8vTm90IHVzZWQ/XHJcbmxldCBzaGlwc1BsYWNlZCA9IGZhbHNlO1xyXG5leHBvcnQgeyB1c2VyLCBjb21wLCB0dXJuQ291bnQsIHNoaXBzUGxhY2VkLCBwbGF5QWdhaW4gfTtcclxuc2V0VXBHYW1lKCk7XHJcbi8qXHJcbkFmdGVyIHdhaXQgZm9yIHNoaXBzLCBjYWxsIGZ1bmN0aW9uIHRoYXQgc2V0cyB1cCBjb21wdXRlciBwbGF5ZXJcclxuRG8gbm90aGluZyB1bnRpbCBvbiBjbGljayBmdW5jdGlvbiBpcyBjYWxsZWRcclxuT24gY2xpY2sgZnVuY3Rpb24gZm9yIGh1bWFuIGd1ZXNzZXM6XHJcbi1HZXQgY29vcmRpbmF0ZXNcclxuLUNvbXAucmVjZWl2ZSBhdHRhY2tcclxuLVVwZGF0ZSBndWVzcyBzcXVhcmUgd2l0aCBjbGFzcyBmb3IgaGl0IG9yIG1pc3NcclxuLUNoZWNrIGZvciBhbGwgc3Vua1xyXG4tIGlmIGFsbCBzdW5rLCByZW1vdmUgYWxsIGxpc3RlbmVycywgcmV0dXJuLCBhbmQgZGlzcGxheSB3aW5uZXJcclxuLWlmIG5vdCBhbGwgc3VuaywgcmVtb3ZlIGxpc3RlbmVyIGZyb20gcHJldmlvdXMgZ3Vlc3MsIC0tPiBjb21wdXRlciB0dXJuIFxyXG4tZ2VuZXJhdGUgcmFuZG9tIGd1ZXNzIHVudGlsIHZhbGlkIGd1ZXNzXHJcbi1IdW1hbi5yZWNlaXZlIGF0dGFja1xyXG4tVXBkYXRlIGJvYXJkIHdpdGggZ3Vlc3MgcmVzdWx0XHJcbi1DaGVjayBmb3IgYWxsIHN1bmtcclxuLWlmIGFsbCBzdW5rLCByZW1vdmUgYWxsIGxpc3RlbmVyZXMsIHJldHVybiwgZGlzcGxheSB3aW5uZXJcclxuLWlmIG5vdCBhbGwgc3VuayAtLT4gZG8gbm90aGluZy4gXHJcblxyXG4qL1xyXG5cclxuLypcclxucmVjZWl2ZSBhdHRhY2sgXHJcbmZpbmQgcm93IGRpdiBieSBhdHRyaWJ1dGUgLS0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyXCIpLnF1ZXJ5U2VsZWN0b3JBbGwoJ1t5LUNvcmQ9XCIxXCJdJyk7XHJcbmZpbmQgYm94IGRpdiBieSBhdHRyaWJ1dGVcclxuXHJcbmlmKHBsYXllci5ib2FyZC5ib2FyZFt5R3Vlc3MgLTFdW3hHdWVzcyAtMV0gPT0gJ21pc3MnKVxyXG57XHJcbiAgYWRkIGNsYXNzIG5hbWUgbWlzc1xyXG59ZWxzZXtcclxuICBhZGQgY2xhc3MgbmFtZSBoaXRcclxufVxyXG4gIE5lZWQgZnVuY3Rpb25zIGZvcjpcclxuICAgIC1SZW1vdmluZyBhbGwgZ3Vlc3MgbGlzdGVuZXJzXHJcbiAgICBcclxuXHJcblxyXG4qL1xyXG5cclxuZXhwb3J0cy5jcmVhdGVTaGlwID0gY3JlYXRlU2hpcDtcclxuZXhwb3J0cy5jcmVhdGVHYW1lQm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQ7XHJcbmV4cG9ydHMuZ2FtZUxvb3AgPSBnYW1lTG9vcDtcclxuXHJcbi8qXHJcbjJkIEFycmF5OlxyXG4gIHgtPiAgIDAgICAgICAgMSAgICAgICAgIDIgICAgICAgICAzICAgICAgIDQgICAgICAgNSAgICAgICA2XHJcbiAgICAwIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgMSBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIDIgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICAzIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgNCBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIDUgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICA2IFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgXlxyXG4gICAgeVxyXG4gICAgRWFjaCBuZXcgc3ViLWFycmF5IGlzIGEgeSBpbmNyZW1lbnRhdGlvblxyXG4gICAgRWFjaCBpbmRleCBpbnNpZGUgb2YgdGhlIHN1YmFycmF5IGlzIGEgeC0gaW5jcmVtZW50YXRpb25cclxuICAgIEJvYXJkIHdpbGwgYmUgeSA9IDAgZnJvbSB0aGUgdG9wIHggPSAwIGZyb20gdGhlIGxlZnRcclxuICAgIGJvYXJkW3Jvd11bY29sdW1uXVxyXG4qL1xyXG5cclxuLypcclxuICAgIFNoaXBzOlxyXG4gICAgQ2Fycmllci0gNVxyXG4gICAgQmF0dGxlc2hpcCAtIDRcclxuICAgIENydWlzZXIgLSAzXHJcbiAgICBTdWJtYXJpbmUgLSAzXHJcbiAgICBEZXN0cm95ZXIgLSAyXHJcblxyXG4qL1xyXG5cclxuLypcclxuXHJcbkZvciBjb21wdXRlciBndWVzc2VzczpcclxubGV0IHhHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG5sZXQgeUd1ZXNzID0gTWF0aC5yYW5kb20oNyk7XHJcbndoaWxlKCFwMS5ib2FyZC5yZWNlaXZlQXR0YWNrKHlHdWVzcywgeEd1ZXNzKSlcclxue1xyXG4gIHhHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG4gIHlHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG59XHJcblxyXG5Gb3IgZ2FtZSBsb29wXCJcclxubGV0IHR1cm5Db3VudGVyID0gMTtcclxubGV0IHdpbm5lciA9IG51bGw7XHJcbndoaWxlKHdpbm5lciA9PSBudWxsKVxyXG57XHJcbiAgaWYodHVybkNvdW50ZXIlMiA9PSApXHJcbiAge1xyXG4gICAgZ2V0IGd1ZXNzIHZhbHVlc1xyXG4gICAgd2hpbGUoIXAyLmJvYXJkLnJlY2VpdmVBdHRhY2sodmFsdWVzKSlcclxuICAgIHtcclxuICAgICAgdXBkYXRlIGd1ZXNzIHZhbHVlc1xyXG4gICAgfVxyXG4gICAgY2hlY2sgZm9yIGFsbCBzdW5rXHJcbiAgfWVsc2V7XHJcbmxldCB4R3Vlc3MgPSBNYXRoLnJhbmRvbSg3KTtcclxubGV0IHlHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG53aGlsZSghcDEuYm9hcmQucmVjZWl2ZUF0dGFjayh5R3Vlc3MsIHhHdWVzcykpXHJcbntcclxuICB4R3Vlc3MgPSBNYXRoLnJhbmRvbSg3KTtcclxuICB5R3Vlc3MgPSBNYXRoLnJhbmRvbSg3KTtcclxufVxyXG5jaGVjayBmb3IgYWxsIHN1bmtcclxuICB9XHJcbiAgdHVybkNvdW50ZXIrKztcclxufVxyXG5cclxuXHJcblxyXG5OZWVkIGEgd2F5IHRvIHdhaXQgZm9yIG5ldyB2YWx1ZXMgaWYgZ3Vlc3MgZnJvbSB1c2VyIGlzIGludmFsaWRcclxuTWF5YmUgYW4gb25jbGljayBtZXRob2QgdGhhdCBzZW5kcyB2YWx1ZXNcclxuTmVlZCBhIHdheSB0byBnZXQgcmV0dXJuIGZyb20gY2hlY2sgaWYgYWxsIGFyZSBzdW5rPyBNYXliZSByZW1vdmUgaXQgZnJvbSByZWNlaXZlXHJcbmF0dGFjayBhbmQgY2FsbCBpdCBhZnRlciBldmVyeSB0dXJuIFxyXG5cclxuKi9cclxuXHJcbi8qXHJcbi1SZW5kZXIgZW1wdHkgYm9hcmRcclxuLU5lZWQgYSB3YXkgdG8gdHJhY2sgd2hpY2ggc3F1YXJlIGlzIGdldHRpbmcgY2xpY2tlZCBpbiByZWxhdGlvbiB0byB0aGUgMmQgYXJyYXlcclxuLVJlbmRlciBib2FyZCBhZnRlciBwbGFjaW5nIGVhY2ggc2hpcCB3L2Egc2hpcCBtYXJrZXJcclxuLVVwZGF0ZSBzcXVhcmVzIGFmdGVyIGVhY2ggZ3Vlc3Mgb24gZWFjaCBzaWRlLiBcclxuLU1heWJlIHVzZSBnZXQgc291cmNlIHRvIGdldCAyZCBhcnJheSBjb29yZGluYXRlc1xyXG5cclxuXHJcbi1FeHBvcnQgY29tcHV0ZXIgcGxheWVyXHJcbi1FeHBvcnQgdHVybiBjb3VudGVyIHRvIHRyYWNrIHdoZW4gY29tcCBzaG91bGQgbWFrZSBhIG1vdmUgYW5kIHdoZW4gdG8gY2hlY2sgZm9yXHJcbmFsbCBzdW5rIGZvciB3aG9zZSBib2FyZFxyXG4tIEV2ZW50IGxpc3RlbmVyIG9uIHJpZ2h0IHNpZGUgYm9hcmQgZm9yIGNvbXAuYm9hcmQucmVjZWl2ZUF0dGFja1xyXG4tIEVtcHR5IHdoaWxlIGxvb3Agd2l0aCBjb25kaXRpb24gb2YgdHVybkNvdW50IG1vZCAyID09IDAsIGFkZCB0dXJuQ291bnQgaW5jcmVtZW50XHJcbi0gdG8gZ3Vlc3Mgb24gY2xpY2sgXHJcblxyXG4qL1xyXG5cclxuLypcclxuNi8xMy8yMiBXaGF0J3MgTGVmdCBUbyBEbzpcclxuLU1vZGFsc1xyXG4tU3R5bGluZ1xyXG4tUGxheSBBZ2FpbiBCdXR0b25zIC0+IG9uIG1vZGFsIGFuZCBvbiBzY3JlZW5cclxuLUFkZCByYWRpbyBmb3IgaG9yaXogdmVydCBwbGFjZW1lbnRcclxuKi9cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwibmFtZSIsImxlbmd0aCIsInBsYWNlZCIsInNoaXBJbmRleCIsImVtcHR5UmVuZGVyIiwiZGl2IiwicGFyZW50RGl2IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInJvd0FyciIsImkiLCJyb3ciLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwic2V0QXR0cmlidXRlIiwiYm94IiwiaW5uZXJUZXh0IiwiYXBwZW5kQ2hpbGQiLCJqIiwiY29uc29sZSIsImxvZyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjaGlsZE5vZGVzIiwicGxhY2VTaGlwTGlzdGVuZXJzIiwidXNlciIsInJvd3MiLCJjdXJSb3ciLCJjdXJZQ29yZCIsImdldEF0dHJpYnV0ZSIsImN1ckJveCIsImN1clhDb3JkIiwiYm9hcmQiLCJhZGRFdmVudExpc3RlbmVyIiwib25BZGRTaGlwQ2xpY2siLCJkaXJlY3Rpb24iLCJxdWVyeVNlbGVjdG9yIiwidmFsdWUiLCJldmVudCIsInRhcmdldCIsInBhcmVudE5vZGUiLCJwbGFjZVNoaXAiLCJwbGF5ZXIiLCJzaGlwIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZUFkZFNoaXBzIiwic2hpcHNQbGFjZWQiLCJyZWZyZXNoQm9hcmQiLCJndWVzc0NsaWNrIiwidXNlcllHdWVzcyIsInVzZXJYR3Vlc3MiLCJ1c2VyWVF1ZXJ5IiwidXNlclhRdWVyeSIsInVzZXJCb3hPZkludGVyZXN0IiwicXVlcnlTZWxlY3RvckFsbCIsImNvbXAiLCJyZWNlaXZlQXR0YWNrIiwiY2hlY2tGb3JBbGxTdW5rIiwiZGlzcGxheU1vZGFsIiwiY29tcFhHdWVzcyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNvbXBZR3Vlc3MiLCJjb21wWVF1ZXJ5IiwiY29tcFhRdWVyeSIsImNvbXBCb3hPZkludGVyZXN0Iiwid2lubmVyIiwibW9kYWwiLCJzdHlsZSIsImRpc3BsYXkiLCJpbm5lckhUTUwiLCJnYW1lQm9hcmQiLCJzaGlwVG9QbGFjZSIsInN0YXJ0aW5nQ29sdW1uIiwic3RhcnRpbmdDb3JkIiwic3RhcnRpbmdYQ29yZCIsInN0YXJ0aW5nUm93Iiwic3RhcnRpbmdZQ29yZCIsImVuZGluZ0NvbHVtbiIsImVuZGluZ0NvcmQiLCJlbmRpbmdYQ29yZCIsImVuZGluZ1JvdyIsImVuZGluZ1lDb3JkIiwidGhpcyIsInlDb3JkIiwieENvcmQiLCJwYXJzZUludCIsImhlYWx0aCIsInN1bmsiLCJwdXNoIiwic2hpcFBvaW50IiwiaGl0U3RhdHVzIiwiY29vcmRpbmF0ZXMiLCJpc1N1bmsiLCJoaXQiLCJoaXRQb2ludCIsImNoZWNrRm9yVmFsaWRQbGFjZW1lbnQiLCJzaGlwcyIsInBsYWNlT2JqIiwic3BvdCIsInNoaXBOYW1lIiwiZmlsdGVyIiwic2giLCJwb2ludEFyciIsInBvaW50IiwidHlwZSIsIndhaXRGb3JTaGlwcyIsImRpcmVjdGlvbnMiLCJwbGFjZUNvbXB1dGVyU2hpcHMiLCJhZGRHdWVzc0NsaWNrIiwic2V0VGltZW91dCIsInBsYXlBZ2FpbiIsInVzZXJCb2FyZCIsImd1ZXNzQm9hcmQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJjbGVhckJvYXJkcyIsImNsZWFyQXJyYXlzIiwiYnV0dG9uIiwiYnV0dG9uMiIsImJ1dHRvbjMiLCJidXR0b240Iiwid2luZG93Iiwib25jbGljayIsImluaXRpYWxpemVCdXR0b24iLCJjcmVhdGVTaGlwIiwiY3JlYXRlR2FtZUJvYXJkIiwiZ2FtZUxvb3AiXSwic291cmNlUm9vdCI6IiJ9
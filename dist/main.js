(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{pS:()=>y,$N:()=>p,IE:()=>u,EA:()=>h});let t=[{name:"Carrier",length:5,placed:!1},{name:"Battleship",length:4,placed:!1},{name:"Cruiser",length:3,placed:!1},{name:"Submarine",length:3,placed:!1},{name:"Destroyer",length:2,placed:!1}],o=0;function r(e){let t=document.getElementById(e),o=["A","B","C","D","E","F","G"];for(let e=0;e<8;e++){let r=document.createElement("div");if(r.className="row",r.setAttribute("Y-Cord",e-1),0==e){let e=document.createElement("div");e.className="box",e.innerText="Y/X ",r.appendChild(e)}for(let t=0;t<8;t++){let n=document.createElement("div");n.className="box",0==e?7!==t&&(n.innerText=o[t],n.innerText+="("+t+")"):0==t&&(n.innerText=e-1),7==t&&0==e||(n.setAttribute("X-Cord",t-1),r.appendChild(n))}t.appendChild(r)}console.log(t.getElementsByClassName("row")[1].childNodes[0])}function n(){console.log(h);let e=document.getElementById("player").getElementsByClassName("row");for(let t=1;t<e.length;t++){let o=e[t],r=o.getAttribute("y-cord");for(let e=1;e<o.childNodes.length;e++){let t=o.childNodes[e],n=t.getAttribute("x-cord");"empty"==h.board.board[r][n]&&t.addEventListener("click",l)}}}function l(){let e=document.querySelector('input[name = "direction"]:checked').value;console.log(e),console.log(event.target),console.log(event.target.parentNode.getAttribute("y-cord")),console.log("xcord",event.target.getAttribute("x-cord")),1==h.board.placeShip(e,t[o].name,t[o].length,event.target.parentNode.getAttribute("y-cord"),event.target.getAttribute("x-cord"))&&function(e,t,r){let a=document.getElementById(e).getElementsByClassName("row");console.log(a[1].childNodes);for(let e=1;e<a.length;e++){let o=a[e],r=o.getAttribute("y-cord");for(let e=1;e<o.childNodes.length;e++){let n=o.childNodes[e],l=n.getAttribute("x-cord");"empty"!==t.board.board[r][l]&&"miss"!==t.board.board[r][l]&&n.classList.add("ship")}}!function(){let e=document.getElementById("player").getElementsByClassName("row");for(let t=1;t<e.length;t++){let o=e[t];for(let e=1;e<o.childNodes.length;e++)o.childNodes[e].removeEventListener("click",l)}}(),o++,o<5&&n(),5==o&&(u=!0,document.getElementById("direction-form").style.display="none",console.log("here"))}("player",h)}function a(){let e=event.target.parentNode.getAttribute("y-cord"),t=event.target.getAttribute("x-cord"),o='[y-Cord="'+e+'"]',r='[x-Cord="'+t+'"]',n=document.getElementById("guess").querySelectorAll(o)[0].querySelectorAll(r)[0];if(y.board.receiveAttack(e,t),"miss"==y.board.board[e][t]?n.classList.add("miss"):"empty"!=y.board.board[e][t]&&n.classList.add("hit"),n.removeEventListener("click",a),1==y.board.checkForAllSunk())return void d("User");let l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());for(;!h.board.receiveAttack(i,l);)l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());let s='[y-cord="'+i+'"]',c='[x-cord="'+l+'"]',m=document.getElementById("player").querySelectorAll(s)[0].querySelectorAll(c)[0];"miss"==h.board.board[i][l]?m.classList.add("miss"):"empty"!=y.board.board[e][t]&&m.classList.add("hit"),1!=h.board.checkForAllSunk()||d("Computer")}function d(e){let t=document.getElementById("display-winner-modal"),o=document.getElementById("winner-modal-text");t.style.display="block",o.innerHTML="The winner is the "+e}const i=function(){var e={ships:[],board:[["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"]],checkForValidPlacement:function(e){let t=e.startingCord.startingXCord,o=e.startingCord.startingYCord,r=e.endingCord.endingXCord,n=e.endingCord.endingYCord;if(console.log(t,o,r,n),"vertical"==e.direction){if(6==o)return!1;if(n>6)return console.log(e.name,n),!1;for(let r=o;r<=n;r++)if(console.log(e.name,this.board[r][t]),"empty"!=this.board[r][t])return!1}else if("horizontal"==e.direction){if(6==t)return!1;if(r>6)return!1;for(let n=t;n<=r;n++)if(console.log(e.name,this.board[o][n]),"empty"!=this.board[o][n])return!1}return!0},placeShip:function(t,o,r,n,l){let a={},d={startingXCord:l,startingYCord:n};"horizontal"==t?(a.endingXCord=parseInt(l)+r-1,a.endingYCord=n):"vertical"==t&&(a.endingXCord=l,a.endingYCord=parseInt(n)+r-1);let i=function(e,t,o,r,n){var l={};if(l.name=e,l.length=o,l.startingCord=r,l.endingCord=n,l.health=[],l.sunk=!1,l.direction=t,"horizontal"==t)for(let e=0;e<=o;e++)l.health.push({shipPoint:e,hitStatus:"false",coordinates:{xCord:parseInt(r.startingXCord)+e,yCord:parseInt(r.startingYCord)}});else if("vertical"==t)for(let e=0;e<=o;e++)l.health.push({shipPoint:e,hitStatus:"false",coordinates:{xCord:r.startingXCord,yCord:parseInt(r.startingYCord)+e}});return l.isSunk=function(){for(let e=0;e<this.length;e++)if("false"==this.health[e].hitStatus)return!1;return this.sunk=!0,!0},l.hit=function(e){this.health[e].hitStatus="true"},l}(o,t,r,d,a);if(0==this.checkForValidPlacement(i))return!1;if(e.ships.push(i),"horizontal"==t)for(let e=0;e<r;e++){let t={name:i.name,spot:i.health[e]};console.log(parseInt(l)+e),this.board[n][parseInt(l)+e]=t}else if("vertical"==t)for(let e=0;e<r;e++){let t={name:i.name,spot:i.health[e]};this.board[parseInt(n)+e][l]=t}return!0},receiveAttack:function(e,t){if("empty"!==this.board[e][t]&&"miss"!==this.board[e][t]){let o=this.board[e][t].name,r=this.ships.filter((e=>e.name==o))[0];console.log(r),console.log("Received X Cord",t),console.log("Received Y Cord",e);let n=r.health.filter((o=>o.coordinates.xCord==t&&o.coordinates.yCord==e));return console.log(o),console.log(n),r.hit(n[0].shipPoint),r.isSunk(),!0}return"empty"==this.board[e][t]?(this.board[e][t]="miss",!0):"miss"!=this.board[e][t]&&"true"!=this.board[e][t].spot.hitStatus},checkForAllSunk:function(){for(let e=0;e<this.ships.length;e++)if(0==this.ships[e].sunk)return!1;return!0}};return e},s=function(e){let t={};return t.type=e,t.board=i(),t};let c=[{name:"Carrier",length:5,placed:!1},{name:"Battleship",length:4,placed:!1},{name:"Cruiser",length:3,placed:!1},{name:"Submarine",length:3,placed:!1},{name:"Destroyer",length:2,placed:!1}];function m(){1==u?(function(){let e=["horizontal","vertical"],t=Math.floor(7*Math.random()),o=Math.floor(7*Math.random()),r=Math.floor(2*Math.random());for(let n=0;n<c.length;n++){for(;!y.board.placeShip(e[r],c[n].name,c[n].length,o,t);)t=Math.floor(7*Math.random()),o=Math.floor(7*Math.random()),r=Math.floor(2*Math.random());console.log(c[n].name,"placed")}console.log(y.board.board)}(),function(){let e=document.getElementById("guess").getElementsByClassName("row");for(let t=1;t<e.length;t++){let o=e[t];o.getAttribute("y-cord");for(let e=1;e<o.childNodes.length;e++){let t=o.childNodes[e];t.getAttribute("x-cord"),t.addEventListener("click",a)}}}()):setTimeout(m,500)}function p(){!function(){o=0;let e=document.getElementById("player"),t=document.getElementById("guess");for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)t.removeChild(t.firstChild)}(),function(){for(let e=0;e<7;e++)for(let t=0;t<7;t++)h.board.board[e][t]="empty",y.board.board[e][t]="empty"}(),u=!1,document.getElementById("direction-form").style.display="block",r("player"),n(),r("guess"),m()}!function(){let e=document.getElementById("play-again"),t=document.getElementById("okay-button"),o=document.getElementById("play-again-modal"),r=document.getElementById("display-winner-modal"),n=document.getElementById("how-to-play");e.addEventListener("click",p),t.addEventListener("click",(function(){r.style.display="none"})),o.addEventListener("click",(function(){r.style.display="none",p()})),document.getElementById("play-button").addEventListener("click",(function(){n.style.display="none"})),window.onclick=function(e){e.target==r&&(r.style.display="none"),e.target==n&&(n.style.display="none")}}();let h=s("human"),y=s("computer"),u=!1;r("player"),n(),r("guess"),m(),exports.createShip=createShip,exports.createGameBoard=createGameBoard,exports.gameLoop=gameLoop})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YSxZQUVwQlgsR0FBYyxFQTlCaEIzQyxFQUFZLFVBQ1ptQixJQUNBbkIsRUFBWSxTQUNadUcsSUFtRUZ6SCxRQUFRNEksV0FBYUEsV0FDckI1SSxRQUFRNkksZ0JBQWtCQSxnQkFDMUI3SSxRQUFROEksU0FBV0EsVSIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2JvYXJkLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3NoaXAuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3BsYXllci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyB1c2VyLCBjb21wLCBzaGlwc1BsYWNlZCwgcGxheUFnYWluIH0gZnJvbSBcIi4uL2luZGV4LmpzXCI7XHJcblxyXG5sZXQgc2hpcHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJDYXJyaWVyXCIsXHJcbiAgICBsZW5ndGg6IDUsXHJcbiAgICBwbGFjZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYXR0bGVzaGlwXCIsXHJcbiAgICBsZW5ndGg6IDQsXHJcbiAgICBwbGFjZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJDcnVpc2VyXCIsXHJcbiAgICBsZW5ndGg6IDMsXHJcbiAgICBwbGFjZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTdWJtYXJpbmVcIixcclxuICAgIGxlbmd0aDogMyxcclxuICAgIHBsYWNlZDogZmFsc2UsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkRlc3Ryb3llclwiLFxyXG4gICAgbGVuZ3RoOiAyLFxyXG4gICAgcGxhY2VkOiBmYWxzZSxcclxuICB9LFxyXG5dO1xyXG5sZXQgc2hpcEluZGV4ID0gMDtcclxuZnVuY3Rpb24gZW1wdHlSZW5kZXIoZGl2KSB7XHJcbiAgbGV0IHBhcmVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdik7XHJcbiAgbGV0IHJvd0FyciA9IFtcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIiwgXCJFXCIsIFwiRlwiLCBcIkdcIl07XHJcbiAgLy9PdXRlciBsb29wIGlzIHJvd3MsIGlubmVyIGxvb3AgaXMgY29sdW1uc1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7XHJcbiAgICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHJvdy5jbGFzc05hbWUgPSBcInJvd1wiO1xyXG4gICAgcm93LnNldEF0dHJpYnV0ZShcIlktQ29yZFwiLCBpIC0gMSk7XHJcbiAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgIGxldCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBib3guY2xhc3NOYW1lID0gXCJib3hcIjtcclxuICAgICAgYm94LmlubmVyVGV4dCA9IFwiWS9YIFwiO1xyXG4gICAgICByb3cuYXBwZW5kQ2hpbGQoYm94KTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgODsgaisrKSB7XHJcbiAgICAgIGxldCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBib3guY2xhc3NOYW1lID0gXCJib3hcIjtcclxuICAgICAgaWYgKGkgPT0gMCkge1xyXG4gICAgICAgIGlmIChqICE9PSA3KSB7XHJcbiAgICAgICAgICBib3guaW5uZXJUZXh0ID0gcm93QXJyW2pdO1xyXG4gICAgICAgICAgYm94LmlubmVyVGV4dCArPSBcIihcIiArIGogKyBcIilcIjtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoaiA9PSAwKSB7XHJcbiAgICAgICAgYm94LmlubmVyVGV4dCA9IGkgLSAxO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaiA9PSA3ICYmIGkgPT0gMCkge1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJveC5zZXRBdHRyaWJ1dGUoXCJYLUNvcmRcIiwgaiAtIDEpO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChib3gpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBwYXJlbnREaXYuYXBwZW5kQ2hpbGQocm93KTtcclxuICB9XHJcbiAgY29uc29sZS5sb2cocGFyZW50RGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyb3dcIilbMV0uY2hpbGROb2Rlc1swXSk7XHJcbn1cclxuZnVuY3Rpb24gZGVsZXRlQm9hcmQoZGl2KSB7XHJcbiAgbGV0IHBhcmVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUFkZFNoaXBzKCkge1xyXG4gIGxldCBwYXJlbnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllclwiKTtcclxuICBsZXQgcm93cyA9IHBhcmVudERpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicm93XCIpO1xyXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IGN1clJvdyA9IHJvd3NbaV07XHJcbiAgICBmb3IgKGxldCBqID0gMTsgaiA8IGN1clJvdy5jaGlsZE5vZGVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGxldCBjdXJCb3ggPSBjdXJSb3cuY2hpbGROb2Rlc1tqXTtcclxuICAgICAgY3VyQm94LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkFkZFNoaXBDbGljayk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlZnJlc2hCb2FyZChkaXYsIHBsYXllciwgc2hpcCkge1xyXG4gIGxldCBwYXJlbnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXYpO1xyXG4gIGxldCByb3dzID0gcGFyZW50RGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyb3dcIik7XHJcbiAgY29uc29sZS5sb2cocm93c1sxXS5jaGlsZE5vZGVzKTtcclxuICBmb3IgKGxldCBpID0gMTsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCBjdXJSb3cgPSByb3dzW2ldO1xyXG4gICAgbGV0IGN1cllDb3JkID0gY3VyUm93LmdldEF0dHJpYnV0ZShcInktY29yZFwiKTtcclxuICAgIGZvciAobGV0IGogPSAxOyBqIDwgY3VyUm93LmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgbGV0IGN1ckJveCA9IGN1clJvdy5jaGlsZE5vZGVzW2pdO1xyXG4gICAgICBsZXQgY3VyWENvcmQgPSBjdXJCb3guZ2V0QXR0cmlidXRlKFwieC1jb3JkXCIpO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgcGxheWVyLmJvYXJkLmJvYXJkW2N1cllDb3JkXVtjdXJYQ29yZF0gIT09IFwiZW1wdHlcIiAmJlxyXG4gICAgICAgIHBsYXllci5ib2FyZC5ib2FyZFtjdXJZQ29yZF1bY3VyWENvcmRdICE9PSBcIm1pc3NcIlxyXG4gICAgICApIHtcclxuICAgICAgICBjdXJCb3guY2xhc3NMaXN0LmFkZChcInNoaXBcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmVtb3ZlQWRkU2hpcHMoKTtcclxuICBzaGlwSW5kZXgrKztcclxuICBpZiAoc2hpcEluZGV4IDwgNSkge1xyXG4gICAgcGxhY2VTaGlwTGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIGlmIChzaGlwSW5kZXggPT0gNSkge1xyXG4gICAgc2hpcHNQbGFjZWQgPSB0cnVlO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXJlY3Rpb24tZm9ybVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBjb25zb2xlLmxvZyhcImhlcmVcIik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwbGFjZVNoaXBMaXN0ZW5lcnMoKSB7XHJcbiAgY29uc29sZS5sb2codXNlcik7XHJcbiAgbGV0IHBhcmVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyXCIpO1xyXG4gIGxldCByb3dzID0gcGFyZW50RGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyb3dcIik7XHJcbiAgLy9sZXQgZGlyZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpcmVjdGlvbi1yYWRpbycpLnZhbHVlO1xyXG4gIGxldCBkaXJlY3Rpb24gPSBcImhvcml6b250YWxcIjtcclxuICAvL091dGVyIGl0ZXJhdGVzIHRocm91Z2ggcm93cywgaW5uZXIgdGhyb3VnaCBib3hlcyBpbiByb3dcclxuICBmb3IgKGxldCBpID0gMTsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCBjdXJSb3cgPSByb3dzW2ldO1xyXG4gICAgbGV0IGN1cllDb3JkID0gY3VyUm93LmdldEF0dHJpYnV0ZShcInktY29yZFwiKTtcclxuICAgIGZvciAobGV0IGogPSAxOyBqIDwgY3VyUm93LmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgbGV0IGN1ckJveCA9IGN1clJvdy5jaGlsZE5vZGVzW2pdO1xyXG4gICAgICBsZXQgY3VyWENvcmQgPSBjdXJCb3guZ2V0QXR0cmlidXRlKFwieC1jb3JkXCIpO1xyXG4gICAgICBpZiAodXNlci5ib2FyZC5ib2FyZFtjdXJZQ29yZF1bY3VyWENvcmRdID09IFwiZW1wdHlcIikge1xyXG4gICAgICAgIGN1ckJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25BZGRTaGlwQ2xpY2spO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbkFkZFNoaXBDbGljaygpIHtcclxuICBsZXQgZGlyZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICdpbnB1dFtuYW1lID0gXCJkaXJlY3Rpb25cIl06Y2hlY2tlZCdcclxuICApLnZhbHVlO1xyXG4gIGNvbnNvbGUubG9nKGRpcmVjdGlvbik7XHJcbiAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcclxuICBjb25zb2xlLmxvZyhldmVudC50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJ5LWNvcmRcIikpO1xyXG4gIGNvbnNvbGUubG9nKFwieGNvcmRcIiwgZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcIngtY29yZFwiKSk7XHJcbiAgaWYgKFxyXG4gICAgdXNlci5ib2FyZC5wbGFjZVNoaXAoXHJcbiAgICAgIGRpcmVjdGlvbixcclxuICAgICAgc2hpcHNbc2hpcEluZGV4XS5uYW1lLFxyXG4gICAgICBzaGlwc1tzaGlwSW5kZXhdLmxlbmd0aCxcclxuICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwieS1jb3JkXCIpLFxyXG4gICAgICBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwieC1jb3JkXCIpXHJcbiAgICApID09IHRydWVcclxuICApIHtcclxuICAgIHJlZnJlc2hCb2FyZChcInBsYXllclwiLCB1c2VyKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGd1ZXNzQ2xpY2soKSB7XHJcbiAgbGV0IHVzZXJZR3Vlc3MgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJ5LWNvcmRcIik7XHJcbiAgbGV0IHVzZXJYR3Vlc3MgPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwieC1jb3JkXCIpO1xyXG4gIGxldCB1c2VyWVF1ZXJ5ID0gYFt5LUNvcmQ9XCJgICsgdXNlcllHdWVzcyArIGBcIl1gO1xyXG4gIGxldCB1c2VyWFF1ZXJ5ID0gYFt4LUNvcmQ9XCJgICsgdXNlclhHdWVzcyArIGBcIl1gO1xyXG4gIGxldCB1c2VyQm94T2ZJbnRlcmVzdCA9IGRvY3VtZW50XHJcbiAgICAuZ2V0RWxlbWVudEJ5SWQoXCJndWVzc1wiKVxyXG4gICAgLnF1ZXJ5U2VsZWN0b3JBbGwodXNlcllRdWVyeSlbMF1cclxuICAgIC5xdWVyeVNlbGVjdG9yQWxsKHVzZXJYUXVlcnkpWzBdO1xyXG5cclxuICBjb21wLmJvYXJkLnJlY2VpdmVBdHRhY2sodXNlcllHdWVzcywgdXNlclhHdWVzcyk7XHJcbiAgaWYgKGNvbXAuYm9hcmQuYm9hcmRbdXNlcllHdWVzc11bdXNlclhHdWVzc10gPT0gXCJtaXNzXCIpIHtcclxuICAgIHVzZXJCb3hPZkludGVyZXN0LmNsYXNzTGlzdC5hZGQoXCJtaXNzXCIpO1xyXG4gIH0gZWxzZSBpZiAoY29tcC5ib2FyZC5ib2FyZFt1c2VyWUd1ZXNzXVt1c2VyWEd1ZXNzXSAhPSBcImVtcHR5XCIpIHtcclxuICAgIHVzZXJCb3hPZkludGVyZXN0LmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XHJcbiAgfVxyXG4gIHVzZXJCb3hPZkludGVyZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBndWVzc0NsaWNrKTtcclxuICBpZiAoY29tcC5ib2FyZC5jaGVja0ZvckFsbFN1bmsoKSA9PSB0cnVlKSB7XHJcbiAgICBkaXNwbGF5TW9kYWwoXCJVc2VyXCIpO1xyXG4gICAgLy9NZXRob2QgdG8gcmVtb3ZlIGFsbCBsaXN0ZW5lcnNcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGxldCBjb21wWEd1ZXNzID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgbGV0IGNvbXBZR3Vlc3MgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICB3aGlsZSAoIXVzZXIuYm9hcmQucmVjZWl2ZUF0dGFjayhjb21wWUd1ZXNzLCBjb21wWEd1ZXNzKSkge1xyXG4gICAgY29tcFhHdWVzcyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gICAgY29tcFlHdWVzcyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gIH1cclxuXHJcbiAgbGV0IGNvbXBZUXVlcnkgPSBgW3ktY29yZD1cImAgKyBjb21wWUd1ZXNzICsgYFwiXWA7XHJcbiAgbGV0IGNvbXBYUXVlcnkgPSBgW3gtY29yZD1cImAgKyBjb21wWEd1ZXNzICsgYFwiXWA7XHJcbiAgbGV0IGNvbXBCb3hPZkludGVyZXN0ID0gZG9jdW1lbnRcclxuICAgIC5nZXRFbGVtZW50QnlJZChcInBsYXllclwiKVxyXG4gICAgLnF1ZXJ5U2VsZWN0b3JBbGwoY29tcFlRdWVyeSlbMF1cclxuICAgIC5xdWVyeVNlbGVjdG9yQWxsKGNvbXBYUXVlcnkpWzBdO1xyXG5cclxuICBpZiAodXNlci5ib2FyZC5ib2FyZFtjb21wWUd1ZXNzXVtjb21wWEd1ZXNzXSA9PSBcIm1pc3NcIikge1xyXG4gICAgY29tcEJveE9mSW50ZXJlc3QuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XHJcbiAgfSBlbHNlIGlmIChjb21wLmJvYXJkLmJvYXJkW3VzZXJZR3Vlc3NdW3VzZXJYR3Vlc3NdICE9IFwiZW1wdHlcIikge1xyXG4gICAgY29tcEJveE9mSW50ZXJlc3QuY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcclxuICB9XHJcbiAgaWYgKHVzZXIuYm9hcmQuY2hlY2tGb3JBbGxTdW5rKCkgPT0gdHJ1ZSkge1xyXG4gICAgZGlzcGxheU1vZGFsKFwiQ29tcHV0ZXJcIik7XHJcbiAgICAvL01ldGhvZCB0byByZW1vdmUgYWxsIGxpc3RlbmVyc1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkR3Vlc3NDbGljaygpIHtcclxuICBsZXQgcGFyZW50RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJndWVzc1wiKTtcclxuICBsZXQgcm93cyA9IHBhcmVudERpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicm93XCIpO1xyXG4gIC8vbGV0IGRpcmVjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXJlY3Rpb24tcmFkaW8nKS52YWx1ZTtcclxuICAvL091dGVyIGl0ZXJhdGVzIHRocm91Z2ggcm93cywgaW5uZXIgdGhyb3VnaCBib3hlcyBpbiByb3dcclxuICBmb3IgKGxldCBpID0gMTsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCBjdXJSb3cgPSByb3dzW2ldO1xyXG4gICAgbGV0IGN1cllDb3JkID0gY3VyUm93LmdldEF0dHJpYnV0ZShcInktY29yZFwiKTtcclxuICAgIGZvciAobGV0IGogPSAxOyBqIDwgY3VyUm93LmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgbGV0IGN1ckJveCA9IGN1clJvdy5jaGlsZE5vZGVzW2pdO1xyXG4gICAgICBsZXQgY3VyWENvcmQgPSBjdXJCb3guZ2V0QXR0cmlidXRlKFwieC1jb3JkXCIpO1xyXG4gICAgICBjdXJCb3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGd1ZXNzQ2xpY2spO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJCb2FyZHMoKSB7XHJcbiAgc2hpcEluZGV4ID0gMDtcclxuICBsZXQgdXNlckJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJcIik7XHJcbiAgbGV0IGd1ZXNzQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImd1ZXNzXCIpO1xyXG4gIHdoaWxlICh1c2VyQm9hcmQuZmlyc3RDaGlsZCkge1xyXG4gICAgdXNlckJvYXJkLnJlbW92ZUNoaWxkKHVzZXJCb2FyZC5maXJzdENoaWxkKTtcclxuICB9XHJcbiAgd2hpbGUgKGd1ZXNzQm9hcmQuZmlyc3RDaGlsZCkge1xyXG4gICAgZ3Vlc3NCb2FyZC5yZW1vdmVDaGlsZChndWVzc0JvYXJkLmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZGlzcGxheU1vZGFsKHdpbm5lcikge1xyXG4gIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzcGxheS13aW5uZXItbW9kYWxcIik7XHJcbiAgbGV0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2lubmVyLW1vZGFsLXRleHRcIik7XHJcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICBkaXYuaW5uZXJIVE1MID0gXCJUaGUgd2lubmVyIGlzIHRoZSBcIiArIHdpbm5lcjtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUJ1dHRvbigpIHtcclxuICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5LWFnYWluXCIpO1xyXG4gIGxldCBidXR0b24zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJva2F5LWJ1dHRvblwiKTtcclxuICBsZXQgYnV0dG9uNCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheS1hZ2Fpbi1tb2RhbFwiKTtcclxuICBsZXQgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpc3BsYXktd2lubmVyLW1vZGFsXCIpO1xyXG4gIGxldCBtb2RhbDIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhvdy10by1wbGF5XCIpO1xyXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcGxheUFnYWluKTtcclxuICBidXR0b24zLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfSk7XHJcblxyXG4gIGJ1dHRvbjQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHBsYXlBZ2FpbigpO1xyXG4gIH0pO1xyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXktYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBtb2RhbDIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH0pO1xyXG4gIHdpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IG1vZGFsKSB7XHJcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IG1vZGFsMikge1xyXG4gICAgICBtb2RhbDIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgZW1wdHlSZW5kZXIsXHJcbiAgcGxhY2VTaGlwTGlzdGVuZXJzLFxyXG4gIGFkZEd1ZXNzQ2xpY2ssXHJcbiAgY2xlYXJCb2FyZHMsXHJcbiAgaW5pdGlhbGl6ZUJ1dHRvbixcclxufTtcclxuIiwiZnVuY3Rpb24gY3JlYXRlU2hpcChuYW1lLCBkaXJlY3Rpb24sIGxlbmd0aCwgc3RhcnRpbmdDb3JkLCBlbmRpbmdDb3JkKSB7XHJcbiAgdmFyIHNoaXAgPSB7fTtcclxuICBzaGlwLm5hbWUgPSBuYW1lO1xyXG4gIHNoaXAubGVuZ3RoID0gbGVuZ3RoO1xyXG4gIHNoaXAuc3RhcnRpbmdDb3JkID0gc3RhcnRpbmdDb3JkO1xyXG4gIHNoaXAuZW5kaW5nQ29yZCA9IGVuZGluZ0NvcmQ7XHJcbiAgc2hpcC5oZWFsdGggPSBbXTtcclxuICBzaGlwLnN1bmsgPSBmYWxzZTtcclxuICBzaGlwLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuXHJcbiAgaWYgKGRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbGVuZ3RoOyBpKyspIHtcclxuICAgICAgc2hpcC5oZWFsdGgucHVzaCh7XHJcbiAgICAgICAgc2hpcFBvaW50OiBpLFxyXG4gICAgICAgIGhpdFN0YXR1czogXCJmYWxzZVwiLFxyXG4gICAgICAgIGNvb3JkaW5hdGVzOiB7XHJcbiAgICAgICAgICB4Q29yZDogcGFyc2VJbnQoc3RhcnRpbmdDb3JkLnN0YXJ0aW5nWENvcmQpICsgaSxcclxuICAgICAgICAgIHlDb3JkOiBwYXJzZUludChzdGFydGluZ0NvcmQuc3RhcnRpbmdZQ29yZCksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gXCJ2ZXJ0aWNhbFwiKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBsZW5ndGg7IGkrKykge1xyXG4gICAgICBzaGlwLmhlYWx0aC5wdXNoKHtcclxuICAgICAgICBzaGlwUG9pbnQ6IGksXHJcbiAgICAgICAgaGl0U3RhdHVzOiBcImZhbHNlXCIsXHJcbiAgICAgICAgY29vcmRpbmF0ZXM6IHtcclxuICAgICAgICAgIHhDb3JkOiBzdGFydGluZ0NvcmQuc3RhcnRpbmdYQ29yZCxcclxuICAgICAgICAgIHlDb3JkOiBwYXJzZUludChzdGFydGluZ0NvcmQuc3RhcnRpbmdZQ29yZCkgKyBpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2hpcC5pc1N1bmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgaWYgKHRoaXMuaGVhbHRoW2pdLmhpdFN0YXR1cyA9PSBcImZhbHNlXCIpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuc3VuayA9IHRydWU7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9O1xyXG5cclxuICBzaGlwLmhpdCA9IGZ1bmN0aW9uIChoaXRQb2ludCkge1xyXG4gICAgdGhpcy5oZWFsdGhbaGl0UG9pbnRdLmhpdFN0YXR1cyA9IFwidHJ1ZVwiO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBzaGlwO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaGlwO1xyXG4iLCJpbXBvcnQgY3JlYXRlU2hpcCBmcm9tIFwiLi9zaGlwXCI7XHJcbmZ1bmN0aW9uIGNyZWF0ZUdhbWVCb2FyZCgpIHtcclxuICB2YXIgZ2FtZUJvYXJkID0ge307XHJcbiAgZ2FtZUJvYXJkLnNoaXBzID0gW107XHJcbiAgZ2FtZUJvYXJkLmJvYXJkID0gW1xyXG4gICAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgXTtcclxuXHJcbiAgZ2FtZUJvYXJkLmNoZWNrRm9yVmFsaWRQbGFjZW1lbnQgPSBmdW5jdGlvbiAoc2hpcFRvUGxhY2UpIHtcclxuICAgIGxldCBzdGFydGluZ0NvbHVtbiA9IHNoaXBUb1BsYWNlLnN0YXJ0aW5nQ29yZC5zdGFydGluZ1hDb3JkO1xyXG4gICAgbGV0IHN0YXJ0aW5nUm93ID0gc2hpcFRvUGxhY2Uuc3RhcnRpbmdDb3JkLnN0YXJ0aW5nWUNvcmQ7XHJcbiAgICBsZXQgZW5kaW5nQ29sdW1uID0gc2hpcFRvUGxhY2UuZW5kaW5nQ29yZC5lbmRpbmdYQ29yZDtcclxuICAgIGxldCBlbmRpbmdSb3cgPSBzaGlwVG9QbGFjZS5lbmRpbmdDb3JkLmVuZGluZ1lDb3JkO1xyXG4gICAgY29uc29sZS5sb2coc3RhcnRpbmdDb2x1bW4sIHN0YXJ0aW5nUm93LCBlbmRpbmdDb2x1bW4sIGVuZGluZ1Jvdyk7XHJcbiAgICBpZiAoc2hpcFRvUGxhY2UuZGlyZWN0aW9uID09IFwidmVydGljYWxcIikge1xyXG4gICAgICBpZiAoc3RhcnRpbmdSb3cgPT0gNikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZW5kaW5nUm93ID4gNikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHNoaXBUb1BsYWNlLm5hbWUsIGVuZGluZ1Jvdyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGkgPSBzdGFydGluZ1JvdzsgaSA8PSBlbmRpbmdSb3c7IGkrKykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHNoaXBUb1BsYWNlLm5hbWUsIHRoaXMuYm9hcmRbaV1bc3RhcnRpbmdDb2x1bW5dKTtcclxuICAgICAgICBpZiAodGhpcy5ib2FyZFtpXVtzdGFydGluZ0NvbHVtbl0gIT0gXCJlbXB0eVwiKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHNoaXBUb1BsYWNlLmRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xyXG4gICAgICBpZiAoc3RhcnRpbmdDb2x1bW4gPT0gNikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZW5kaW5nQ29sdW1uID4gNikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBqID0gc3RhcnRpbmdDb2x1bW47IGogPD0gZW5kaW5nQ29sdW1uOyBqKyspIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhzaGlwVG9QbGFjZS5uYW1lLCB0aGlzLmJvYXJkW3N0YXJ0aW5nUm93XVtqXSk7XHJcbiAgICAgICAgaWYgKHRoaXMuYm9hcmRbc3RhcnRpbmdSb3ddW2pdICE9IFwiZW1wdHlcIikge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgZ2FtZUJvYXJkLnBsYWNlU2hpcCA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIG5hbWUsIGxlbmd0aCwgeUNvcmQsIHhDb3JkKSB7XHJcbiAgICBsZXQgZW5kaW5nQ29yZCA9IHt9O1xyXG4gICAgbGV0IHN0YXJ0aW5nQ29yZCA9IHsgc3RhcnRpbmdYQ29yZDogeENvcmQsIHN0YXJ0aW5nWUNvcmQ6IHlDb3JkIH07XHJcblxyXG4gICAgaWYgKGRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xyXG4gICAgICBlbmRpbmdDb3JkLmVuZGluZ1hDb3JkID0gcGFyc2VJbnQoeENvcmQpICsgbGVuZ3RoIC0gMTtcclxuICAgICAgZW5kaW5nQ29yZC5lbmRpbmdZQ29yZCA9IHlDb3JkO1xyXG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gXCJ2ZXJ0aWNhbFwiKSB7XHJcbiAgICAgIGVuZGluZ0NvcmQuZW5kaW5nWENvcmQgPSB4Q29yZDtcclxuICAgICAgZW5kaW5nQ29yZC5lbmRpbmdZQ29yZCA9IHBhcnNlSW50KHlDb3JkKSArIGxlbmd0aCAtIDE7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNoaXAgPSBjcmVhdGVTaGlwKG5hbWUsIGRpcmVjdGlvbiwgbGVuZ3RoLCBzdGFydGluZ0NvcmQsIGVuZGluZ0NvcmQpO1xyXG4gICAgaWYgKHRoaXMuY2hlY2tGb3JWYWxpZFBsYWNlbWVudChzaGlwKSA9PSBmYWxzZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBnYW1lQm9hcmQuc2hpcHMucHVzaChzaGlwKTtcclxuICAgICAgaWYgKGRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBwbGFjZU9iaiA9IHtcclxuICAgICAgICAgICAgbmFtZTogc2hpcC5uYW1lLFxyXG4gICAgICAgICAgICBzcG90OiBzaGlwLmhlYWx0aFtpXSxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhwYXJzZUludCh4Q29yZCkgKyBpKTtcclxuICAgICAgICAgIHRoaXMuYm9hcmRbeUNvcmRdW3BhcnNlSW50KHhDb3JkKSArIGldID0gcGxhY2VPYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInZlcnRpY2FsXCIpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgcGxhY2VPYmogPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IHNoaXAubmFtZSxcclxuICAgICAgICAgICAgc3BvdDogc2hpcC5oZWFsdGhbaV0sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdGhpcy5ib2FyZFtwYXJzZUludCh5Q29yZCkgKyBpXVt4Q29yZF0gPSBwbGFjZU9iajtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH07XHJcblxyXG4gIGdhbWVCb2FyZC5yZWNlaXZlQXR0YWNrID0gZnVuY3Rpb24gKHlDb3JkLCB4Q29yZCkge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZF0gIT09IFwiZW1wdHlcIiAmJlxyXG4gICAgICB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZF0gIT09IFwibWlzc1wiXHJcbiAgICApIHtcclxuICAgICAgbGV0IHNoaXBOYW1lID0gdGhpcy5ib2FyZFt5Q29yZF1beENvcmRdLm5hbWU7XHJcbiAgICAgIGxldCBmaWx0ZXJlZEFyciA9IHRoaXMuc2hpcHMuZmlsdGVyKChzaCkgPT4gc2gubmFtZSA9PSBzaGlwTmFtZSk7XHJcbiAgICAgIGxldCBzaGlwID0gZmlsdGVyZWRBcnJbMF07XHJcbiAgICAgIGNvbnNvbGUubG9nKHNoaXApO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlJlY2VpdmVkIFggQ29yZFwiLCB4Q29yZCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWQgWSBDb3JkXCIsIHlDb3JkKTtcclxuICAgICAgbGV0IHBvaW50QXJyID0gc2hpcC5oZWFsdGguZmlsdGVyKFxyXG4gICAgICAgIChwb2ludCkgPT5cclxuICAgICAgICAgIHBvaW50LmNvb3JkaW5hdGVzLnhDb3JkID09IHhDb3JkICYmIHBvaW50LmNvb3JkaW5hdGVzLnlDb3JkID09IHlDb3JkXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHNoaXBOYW1lKTtcclxuICAgICAgY29uc29sZS5sb2cocG9pbnRBcnIpO1xyXG4gICAgICBzaGlwLmhpdChwb2ludEFyclswXS5zaGlwUG9pbnQpO1xyXG4gICAgICBzaGlwLmlzU3VuaygpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5ib2FyZFt5Q29yZF1beENvcmRdID09IFwiZW1wdHlcIikge1xyXG4gICAgICB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZF0gPSBcIm1pc3NcIjtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZF0gPT0gXCJtaXNzXCIgfHxcclxuICAgICAgdGhpcy5ib2FyZFt5Q29yZF1beENvcmRdLnNwb3QuaGl0U3RhdHVzID09IFwidHJ1ZVwiXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgZ2FtZUJvYXJkLmNoZWNrRm9yQWxsU3VuayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaGlwcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodGhpcy5zaGlwc1tpXS5zdW5rID09IGZhbHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gZ2FtZUJvYXJkO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVHYW1lQm9hcmQ7XHJcbiIsImltcG9ydCBjcmVhdGVHYW1lQm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XHJcbmZ1bmN0aW9uIGNyZWF0ZVBsYXllcih0eXBlKSB7XHJcbiAgbGV0IHBsYXllciA9IHt9O1xyXG4gIHBsYXllci50eXBlID0gdHlwZTtcclxuICBwbGF5ZXIuYm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKTtcclxuXHJcbiAgcmV0dXJuIHBsYXllcjtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUGxheWVyO1xyXG4iLCJpbXBvcnQge1xyXG4gIGVtcHR5UmVuZGVyLFxyXG4gIHBsYWNlU2hpcExpc3RlbmVycyxcclxuICBhZGRHdWVzc0NsaWNrLFxyXG4gIGNsZWFyQm9hcmRzLFxyXG4gIGluaXRpYWxpemVCdXR0b24sXHJcbn0gZnJvbSBcIi4vbW9kdWxlcy9ib2FyZFwiO1xyXG5pbXBvcnQgY3JlYXRlUGxheWVyIGZyb20gXCIuL21vZHVsZXMvcGxheWVyXCI7XHJcblxyXG5sZXQgc2hpcHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJDYXJyaWVyXCIsXHJcbiAgICBsZW5ndGg6IDUsXHJcbiAgICBwbGFjZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYXR0bGVzaGlwXCIsXHJcbiAgICBsZW5ndGg6IDQsXHJcbiAgICBwbGFjZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJDcnVpc2VyXCIsXHJcbiAgICBsZW5ndGg6IDMsXHJcbiAgICBwbGFjZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTdWJtYXJpbmVcIixcclxuICAgIGxlbmd0aDogMyxcclxuICAgIHBsYWNlZDogZmFsc2UsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkRlc3Ryb3llclwiLFxyXG4gICAgbGVuZ3RoOiAyLFxyXG4gICAgcGxhY2VkOiBmYWxzZSxcclxuICB9LFxyXG5dO1xyXG5cclxuZnVuY3Rpb24gd2FpdEZvclNoaXBzKCkge1xyXG4gIGlmIChzaGlwc1BsYWNlZCAhPSB0cnVlKSB7XHJcbiAgICBzZXRUaW1lb3V0KHdhaXRGb3JTaGlwcywgNTAwKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgcGxhY2VDb21wdXRlclNoaXBzKCk7XHJcbiAgYWRkR3Vlc3NDbGljaygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwbGFjZUNvbXB1dGVyU2hpcHMoKSB7XHJcbiAgbGV0IGRpcmVjdGlvbnMgPSBbXCJob3Jpem9udGFsXCIsIFwidmVydGljYWxcIl07XHJcbiAgbGV0IHhDb3JkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgbGV0IHlDb3JkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgbGV0IGRpcmVjdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcHMubGVuZ3RoOyBpKyspIHtcclxuICAgIHdoaWxlIChcclxuICAgICAgIWNvbXAuYm9hcmQucGxhY2VTaGlwKFxyXG4gICAgICAgIGRpcmVjdGlvbnNbZGlyZWN0aW9uXSxcclxuICAgICAgICBzaGlwc1tpXS5uYW1lLFxyXG4gICAgICAgIHNoaXBzW2ldLmxlbmd0aCxcclxuICAgICAgICB5Q29yZCxcclxuICAgICAgICB4Q29yZFxyXG4gICAgICApXHJcbiAgICApIHtcclxuICAgICAgeENvcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICAgICAgeUNvcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICAgICAgZGlyZWN0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMik7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhzaGlwc1tpXS5uYW1lLCBcInBsYWNlZFwiKTtcclxuICB9XHJcbiAgY29uc29sZS5sb2coY29tcC5ib2FyZC5ib2FyZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFVwR2FtZSgpIHtcclxuICBlbXB0eVJlbmRlcihcInBsYXllclwiKTtcclxuICBwbGFjZVNoaXBMaXN0ZW5lcnMoKTtcclxuICBlbXB0eVJlbmRlcihcImd1ZXNzXCIpO1xyXG4gIHdhaXRGb3JTaGlwcygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwbGF5QWdhaW4oKSB7XHJcbiAgY2xlYXJCb2FyZHMoKTtcclxuICBjbGVhckFycmF5cygpO1xyXG4gIHNoaXBzUGxhY2VkID0gZmFsc2U7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXJlY3Rpb24tZm9ybVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIGVtcHR5UmVuZGVyKFwicGxheWVyXCIpO1xyXG4gIHBsYWNlU2hpcExpc3RlbmVycygpO1xyXG4gIGVtcHR5UmVuZGVyKFwiZ3Vlc3NcIik7XHJcbiAgd2FpdEZvclNoaXBzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyQXJyYXlzKCkge1xyXG4gIC8vT3V0dGVyIHJvd3MsIGlubmVyIGNvbHVtbnNcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IDc7IGkrKykge1xyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCA3OyBqKyspIHtcclxuICAgICAgdXNlci5ib2FyZC5ib2FyZFtpXVtqXSA9IFwiZW1wdHlcIjtcclxuICAgICAgY29tcC5ib2FyZC5ib2FyZFtpXVtqXSA9IFwiZW1wdHlcIjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuaW5pdGlhbGl6ZUJ1dHRvbigpO1xyXG5sZXQgdXNlciA9IGNyZWF0ZVBsYXllcihcImh1bWFuXCIpO1xyXG5sZXQgY29tcCA9IGNyZWF0ZVBsYXllcihcImNvbXB1dGVyXCIpO1xyXG5sZXQgdHVybkNvdW50ID0gMDsgLy9Ob3QgdXNlZD9cclxubGV0IHNoaXBzUGxhY2VkID0gZmFsc2U7XHJcbmV4cG9ydCB7IHVzZXIsIGNvbXAsIHR1cm5Db3VudCwgc2hpcHNQbGFjZWQsIHBsYXlBZ2FpbiB9O1xyXG5zZXRVcEdhbWUoKTtcclxuLypcclxuQWZ0ZXIgd2FpdCBmb3Igc2hpcHMsIGNhbGwgZnVuY3Rpb24gdGhhdCBzZXRzIHVwIGNvbXB1dGVyIHBsYXllclxyXG5EbyBub3RoaW5nIHVudGlsIG9uIGNsaWNrIGZ1bmN0aW9uIGlzIGNhbGxlZFxyXG5PbiBjbGljayBmdW5jdGlvbiBmb3IgaHVtYW4gZ3Vlc3NlczpcclxuLUdldCBjb29yZGluYXRlc1xyXG4tQ29tcC5yZWNlaXZlIGF0dGFja1xyXG4tVXBkYXRlIGd1ZXNzIHNxdWFyZSB3aXRoIGNsYXNzIGZvciBoaXQgb3IgbWlzc1xyXG4tQ2hlY2sgZm9yIGFsbCBzdW5rXHJcbi0gaWYgYWxsIHN1bmssIHJlbW92ZSBhbGwgbGlzdGVuZXJzLCByZXR1cm4sIGFuZCBkaXNwbGF5IHdpbm5lclxyXG4taWYgbm90IGFsbCBzdW5rLCByZW1vdmUgbGlzdGVuZXIgZnJvbSBwcmV2aW91cyBndWVzcywgLS0+IGNvbXB1dGVyIHR1cm4gXHJcbi1nZW5lcmF0ZSByYW5kb20gZ3Vlc3MgdW50aWwgdmFsaWQgZ3Vlc3NcclxuLUh1bWFuLnJlY2VpdmUgYXR0YWNrXHJcbi1VcGRhdGUgYm9hcmQgd2l0aCBndWVzcyByZXN1bHRcclxuLUNoZWNrIGZvciBhbGwgc3Vua1xyXG4taWYgYWxsIHN1bmssIHJlbW92ZSBhbGwgbGlzdGVuZXJlcywgcmV0dXJuLCBkaXNwbGF5IHdpbm5lclxyXG4taWYgbm90IGFsbCBzdW5rIC0tPiBkbyBub3RoaW5nLiBcclxuXHJcbiovXHJcblxyXG4vKlxyXG5yZWNlaXZlIGF0dGFjayBcclxuZmluZCByb3cgZGl2IGJ5IGF0dHJpYnV0ZSAtLT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJcIikucXVlcnlTZWxlY3RvckFsbCgnW3ktQ29yZD1cIjFcIl0nKTtcclxuZmluZCBib3ggZGl2IGJ5IGF0dHJpYnV0ZVxyXG5cclxuaWYocGxheWVyLmJvYXJkLmJvYXJkW3lHdWVzcyAtMV1beEd1ZXNzIC0xXSA9PSAnbWlzcycpXHJcbntcclxuICBhZGQgY2xhc3MgbmFtZSBtaXNzXHJcbn1lbHNle1xyXG4gIGFkZCBjbGFzcyBuYW1lIGhpdFxyXG59XHJcbiAgTmVlZCBmdW5jdGlvbnMgZm9yOlxyXG4gICAgLVJlbW92aW5nIGFsbCBndWVzcyBsaXN0ZW5lcnNcclxuICAgIFxyXG5cclxuXHJcbiovXHJcblxyXG5leHBvcnRzLmNyZWF0ZVNoaXAgPSBjcmVhdGVTaGlwO1xyXG5leHBvcnRzLmNyZWF0ZUdhbWVCb2FyZCA9IGNyZWF0ZUdhbWVCb2FyZDtcclxuZXhwb3J0cy5nYW1lTG9vcCA9IGdhbWVMb29wO1xyXG5cclxuLypcclxuMmQgQXJyYXk6XHJcbiAgeC0+ICAgMCAgICAgICAxICAgICAgICAgMiAgICAgICAgIDMgICAgICAgNCAgICAgICA1ICAgICAgIDZcclxuICAgIDAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICAxIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgMiBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIDMgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICA0IFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgNSBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIDYgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICBeXHJcbiAgICB5XHJcbiAgICBFYWNoIG5ldyBzdWItYXJyYXkgaXMgYSB5IGluY3JlbWVudGF0aW9uXHJcbiAgICBFYWNoIGluZGV4IGluc2lkZSBvZiB0aGUgc3ViYXJyYXkgaXMgYSB4LSBpbmNyZW1lbnRhdGlvblxyXG4gICAgQm9hcmQgd2lsbCBiZSB5ID0gMCBmcm9tIHRoZSB0b3AgeCA9IDAgZnJvbSB0aGUgbGVmdFxyXG4gICAgYm9hcmRbcm93XVtjb2x1bW5dXHJcbiovXHJcblxyXG4vKlxyXG4gICAgU2hpcHM6XHJcbiAgICBDYXJyaWVyLSA1XHJcbiAgICBCYXR0bGVzaGlwIC0gNFxyXG4gICAgQ3J1aXNlciAtIDNcclxuICAgIFN1Ym1hcmluZSAtIDNcclxuICAgIERlc3Ryb3llciAtIDJcclxuXHJcbiovXHJcblxyXG4vKlxyXG5cclxuRm9yIGNvbXB1dGVyIGd1ZXNzZXNzOlxyXG5sZXQgeEd1ZXNzID0gTWF0aC5yYW5kb20oNyk7XHJcbmxldCB5R3Vlc3MgPSBNYXRoLnJhbmRvbSg3KTtcclxud2hpbGUoIXAxLmJvYXJkLnJlY2VpdmVBdHRhY2soeUd1ZXNzLCB4R3Vlc3MpKVxyXG57XHJcbiAgeEd1ZXNzID0gTWF0aC5yYW5kb20oNyk7XHJcbiAgeUd1ZXNzID0gTWF0aC5yYW5kb20oNyk7XHJcbn1cclxuXHJcbkZvciBnYW1lIGxvb3BcIlxyXG5sZXQgdHVybkNvdW50ZXIgPSAxO1xyXG5sZXQgd2lubmVyID0gbnVsbDtcclxud2hpbGUod2lubmVyID09IG51bGwpXHJcbntcclxuICBpZih0dXJuQ291bnRlciUyID09IClcclxuICB7XHJcbiAgICBnZXQgZ3Vlc3MgdmFsdWVzXHJcbiAgICB3aGlsZSghcDIuYm9hcmQucmVjZWl2ZUF0dGFjayh2YWx1ZXMpKVxyXG4gICAge1xyXG4gICAgICB1cGRhdGUgZ3Vlc3MgdmFsdWVzXHJcbiAgICB9XHJcbiAgICBjaGVjayBmb3IgYWxsIHN1bmtcclxuICB9ZWxzZXtcclxubGV0IHhHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG5sZXQgeUd1ZXNzID0gTWF0aC5yYW5kb20oNyk7XHJcbndoaWxlKCFwMS5ib2FyZC5yZWNlaXZlQXR0YWNrKHlHdWVzcywgeEd1ZXNzKSlcclxue1xyXG4gIHhHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG4gIHlHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG59XHJcbmNoZWNrIGZvciBhbGwgc3Vua1xyXG4gIH1cclxuICB0dXJuQ291bnRlcisrO1xyXG59XHJcblxyXG5cclxuXHJcbk5lZWQgYSB3YXkgdG8gd2FpdCBmb3IgbmV3IHZhbHVlcyBpZiBndWVzcyBmcm9tIHVzZXIgaXMgaW52YWxpZFxyXG5NYXliZSBhbiBvbmNsaWNrIG1ldGhvZCB0aGF0IHNlbmRzIHZhbHVlc1xyXG5OZWVkIGEgd2F5IHRvIGdldCByZXR1cm4gZnJvbSBjaGVjayBpZiBhbGwgYXJlIHN1bms/IE1heWJlIHJlbW92ZSBpdCBmcm9tIHJlY2VpdmVcclxuYXR0YWNrIGFuZCBjYWxsIGl0IGFmdGVyIGV2ZXJ5IHR1cm4gXHJcblxyXG4qL1xyXG5cclxuLypcclxuLVJlbmRlciBlbXB0eSBib2FyZFxyXG4tTmVlZCBhIHdheSB0byB0cmFjayB3aGljaCBzcXVhcmUgaXMgZ2V0dGluZyBjbGlja2VkIGluIHJlbGF0aW9uIHRvIHRoZSAyZCBhcnJheVxyXG4tUmVuZGVyIGJvYXJkIGFmdGVyIHBsYWNpbmcgZWFjaCBzaGlwIHcvYSBzaGlwIG1hcmtlclxyXG4tVXBkYXRlIHNxdWFyZXMgYWZ0ZXIgZWFjaCBndWVzcyBvbiBlYWNoIHNpZGUuIFxyXG4tTWF5YmUgdXNlIGdldCBzb3VyY2UgdG8gZ2V0IDJkIGFycmF5IGNvb3JkaW5hdGVzXHJcblxyXG5cclxuLUV4cG9ydCBjb21wdXRlciBwbGF5ZXJcclxuLUV4cG9ydCB0dXJuIGNvdW50ZXIgdG8gdHJhY2sgd2hlbiBjb21wIHNob3VsZCBtYWtlIGEgbW92ZSBhbmQgd2hlbiB0byBjaGVjayBmb3JcclxuYWxsIHN1bmsgZm9yIHdob3NlIGJvYXJkXHJcbi0gRXZlbnQgbGlzdGVuZXIgb24gcmlnaHQgc2lkZSBib2FyZCBmb3IgY29tcC5ib2FyZC5yZWNlaXZlQXR0YWNrXHJcbi0gRW1wdHkgd2hpbGUgbG9vcCB3aXRoIGNvbmRpdGlvbiBvZiB0dXJuQ291bnQgbW9kIDIgPT0gMCwgYWRkIHR1cm5Db3VudCBpbmNyZW1lbnRcclxuLSB0byBndWVzcyBvbiBjbGljayBcclxuXHJcbiovXHJcblxyXG4vKlxyXG42LzEzLzIyIFdoYXQncyBMZWZ0IFRvIERvOlxyXG4tTW9kYWxzXHJcbi1TdHlsaW5nXHJcbi1QbGF5IEFnYWluIEJ1dHRvbnMgLT4gb24gbW9kYWwgYW5kIG9uIHNjcmVlblxyXG4tQWRkIHJhZGlvIGZvciBob3JpeiB2ZXJ0IHBsYWNlbWVudFxyXG4qL1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzaGlwcyIsIm5hbWUiLCJsZW5ndGgiLCJwbGFjZWQiLCJzaGlwSW5kZXgiLCJlbXB0eVJlbmRlciIsImRpdiIsInBhcmVudERpdiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyb3dBcnIiLCJpIiwicm93IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInNldEF0dHJpYnV0ZSIsImJveCIsImlubmVyVGV4dCIsImFwcGVuZENoaWxkIiwiaiIsImNvbnNvbGUiLCJsb2ciLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2hpbGROb2RlcyIsInBsYWNlU2hpcExpc3RlbmVycyIsInVzZXIiLCJyb3dzIiwiY3VyUm93IiwiY3VyWUNvcmQiLCJnZXRBdHRyaWJ1dGUiLCJjdXJCb3giLCJjdXJYQ29yZCIsImJvYXJkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQWRkU2hpcENsaWNrIiwiZGlyZWN0aW9uIiwicXVlcnlTZWxlY3RvciIsInZhbHVlIiwiZXZlbnQiLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwicGxhY2VTaGlwIiwicGxheWVyIiwic2hpcCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVBZGRTaGlwcyIsInNoaXBzUGxhY2VkIiwic3R5bGUiLCJkaXNwbGF5IiwicmVmcmVzaEJvYXJkIiwiZ3Vlc3NDbGljayIsInVzZXJZR3Vlc3MiLCJ1c2VyWEd1ZXNzIiwidXNlcllRdWVyeSIsInVzZXJYUXVlcnkiLCJ1c2VyQm94T2ZJbnRlcmVzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb21wIiwicmVjZWl2ZUF0dGFjayIsImNoZWNrRm9yQWxsU3VuayIsImRpc3BsYXlNb2RhbCIsImNvbXBYR3Vlc3MiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjb21wWUd1ZXNzIiwiY29tcFlRdWVyeSIsImNvbXBYUXVlcnkiLCJjb21wQm94T2ZJbnRlcmVzdCIsIndpbm5lciIsIm1vZGFsIiwiaW5uZXJIVE1MIiwiZ2FtZUJvYXJkIiwic2hpcFRvUGxhY2UiLCJzdGFydGluZ0NvbHVtbiIsInN0YXJ0aW5nQ29yZCIsInN0YXJ0aW5nWENvcmQiLCJzdGFydGluZ1JvdyIsInN0YXJ0aW5nWUNvcmQiLCJlbmRpbmdDb2x1bW4iLCJlbmRpbmdDb3JkIiwiZW5kaW5nWENvcmQiLCJlbmRpbmdSb3ciLCJlbmRpbmdZQ29yZCIsInRoaXMiLCJ5Q29yZCIsInhDb3JkIiwicGFyc2VJbnQiLCJoZWFsdGgiLCJzdW5rIiwicHVzaCIsInNoaXBQb2ludCIsImhpdFN0YXR1cyIsImNvb3JkaW5hdGVzIiwiaXNTdW5rIiwiaGl0IiwiaGl0UG9pbnQiLCJjaGVja0ZvclZhbGlkUGxhY2VtZW50IiwicGxhY2VPYmoiLCJzcG90Iiwic2hpcE5hbWUiLCJmaWx0ZXIiLCJzaCIsInBvaW50QXJyIiwicG9pbnQiLCJ0eXBlIiwid2FpdEZvclNoaXBzIiwiZGlyZWN0aW9ucyIsInBsYWNlQ29tcHV0ZXJTaGlwcyIsImFkZEd1ZXNzQ2xpY2siLCJzZXRUaW1lb3V0IiwicGxheUFnYWluIiwidXNlckJvYXJkIiwiZ3Vlc3NCb2FyZCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImNsZWFyQm9hcmRzIiwiY2xlYXJBcnJheXMiLCJidXR0b24iLCJidXR0b24zIiwiYnV0dG9uNCIsIm1vZGFsMiIsIndpbmRvdyIsIm9uY2xpY2siLCJpbml0aWFsaXplQnV0dG9uIiwiY3JlYXRlU2hpcCIsImNyZWF0ZUdhbWVCb2FyZCIsImdhbWVMb29wIl0sInNvdXJjZVJvb3QiOiIifQ==
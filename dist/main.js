(()=>{"use strict";var t={d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{Z:()=>s});let e=[{name:"Carrier",length:5,placed:!1},{name:"Battleship",length:4,placed:!1},{name:"Cruiser",length:3,placed:!1},{name:"Submarine",length:3,placed:!1},{name:"Destroyer",length:2,placed:!1}],r=0;function o(t,e){let r=document.getElementById(t),o=["A","B","C","D","E","F","G"];for(let t=0;t<8;t++){let e=document.createElement("div");if(e.className="row",e.setAttribute("Y-Cord",t),0==t){let t=document.createElement("div");t.className="box",t.innerText="Y/X ",e.appendChild(t)}for(let r=0;r<8;r++){let n=document.createElement("div");n.className="box",n.setAttribute("X-Cord",r),0==t?7!==r&&(n.innerText=o[r],n.innerText+="("+r+")"):0==r&&(n.innerText=t),7==r&&0==t||e.appendChild(n)}r.appendChild(e)}console.log(r.getElementsByClassName("row")[1].childNodes[0])}function n(){console.log(s);let t=document.getElementById("player").getElementsByClassName("row");for(let e=1;e<t.length;e++){let r=t[e],o=r.getAttribute("y-cord");for(let t=1;t<r.childNodes.length;t++){let e=r.childNodes[t],n=e.getAttribute("x-cord");"empty"==s.board.board[o-1][n-1]&&e.addEventListener("click",a)}}}function a(){console.log(event.target),1==s.board.placeShip("horizontal",e[r].name,e[r].length,event.target.parentNode.getAttribute("y-cord")-1,event.target.getAttribute("x-cord")-1)&&function(t,e,o){let l=document.getElementById(t).getElementsByClassName("row");for(let t=1;t<l.length;t++){let r=l[t],o=r.getAttribute("y-cord");for(let t=1;t<r.childNodes.length;t++){let n=r.childNodes[t],a=n.getAttribute("x-cord");"empty"!==e.board.board[o-1][a-1]&&"miss"!==e.board.board[o-1][a-1]&&n.classList.add("ship")}}!function(){let t=document.getElementById("player").getElementsByClassName("row");for(let e=1;e<t.length;e++){let r=t[e];for(let t=1;t<r.childNodes.length;t++)r.childNodes[t].removeEventListener("click",a)}}(),r++,n()}("player",s)}function l(t,e,r,o,n){var a={};if(a.name=t,a.length=r,a.startingCord=o,a.endingCord=n,a.health=[],a.sunk=!1,a.direction=e,"horizontal"==e)for(let t=1;t<=r;t++)a.health.push({shipPoint:t,hitStatus:"false",coordinates:{xCord:o.startingXCord+t,yCord:o.startingYCord}});else if("vertical"==e)for(let t=1;t<=r;t++)a.health.push({shipPoint:t,hitStatus:"false",coordinates:{xCord:o.startingXCord,yCord:o.startingYCord+t}});return a.isSunk=function(){for(let t=0;t<this.length;t++)if("false"===this.health[t].hitStatus)return!1;return this.sunk=!0,!0},a.hit=function(t){this.health[t].hitStatus="true"},a}function i(){var t={ships:[],board:[["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"],["empty","empty","empty","empty","empty","empty","empty"]],checkForValidPlacement:function(t){let e=t.startingCord.startingXCord,r=t.startingCord.startingYCord,o=t.endingCord.endingXCord,n=t.endingCord.endingYCord;if("vertical"==t.direction){if(6==r)return!1;if(n>6)return console.log(t.name,n),!1;for(let o=r;o<=n;o++)if(console.log(t.name,this.board[o][e]),"empty"!=this.board[o][e])return!1}else if("horizontal"==t.direction){if(6==e)return!1;if(o>6)return!1;for(let n=e;n<=o;n++)if(console.log(t.name,this.board[r][n]),"empty"!=this.board[r][n])return!1}return!0},placeShip:function(e,r,o,n,a){let i={},d={startingXCord:a,startingYCord:n};"horizontal"==e?(i.endingXCord=a+o-1,i.endingYCord=n):"vertical"==e&&(i.endingXCord=a,i.endingYCord=n+o-1);let h=l(r,e,o,d,i);if(0==this.checkForValidPlacement(h))return!1;if(t.ships.push(h),"horizontal"==e)for(let t=0;t<o;t++){let e={name:h.name,spot:h.health[t]};this.board[n][a+t]=e}else if("vertical"==e)for(let t=0;t<o;t++){let e={name:h.name,spot:h.health[t]};this.board[n+t][a]=e}return!0},receiveAttack:function(t,e){if("empty"!==this.board[t][e]&&"miss"!==this.board[t][e]){let r=this.board[t][e].name,o=this.ships.filter((t=>t.name==r))[0],n=o.health.filter((r=>r.coordinates.xCord===e&&r.coordinates.yCord===t));return o.hit(n[0].shipPoint),o.isSunk(),!0}return"empty"==this.board[t][e]?(this.board[t][e]="miss",!0):"miss"!=this.board[t][e]&&"true"!=this.board[t][e].spot.hitStatus},checkForAllSunk:function(){for(let t=0;t<this.ships.length;t++)if(0==this.ships[t].sunk)return!1;return!0}};return t}function d(t){let e={};return e.type=t,e.board=i(),e}let h=d("human");o("player");const s=h;n(),o("guess"),exports.createShip=l,exports.createGameBoard=i,exports.gameLoop=function(){let t=d("human"),e=d("computer"),r=null,o=["Carrier","Battleship","Cruiser","Submarine","Destroyer"],n=[5,4,3,3,2],a=["horizontal","vertical"],l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random()),h=Math.floor(1*Math.random());for(let t=0;t<o.length;t++)for(;!e.board.placeShip(a[h],o[t],n[t],i,l);)l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());for(let e=0;e<o.length;e++)for(;!t.board.placeShip(a[h],o[e],n[e],i,l);)l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());for(;null==r;){for(l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());!e.board.receiveAttack(i,l);)l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());if(1==e.board.checkForAllSunk()&&(r="Human"),null==r){for(l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());!t.board.receiveAttack(i,l);)l=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());1==t.board.checkForAllSunk()&&(r="Computer")}}return r}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVFtQyxLQUFLQyxNQUFzQixFQUFoQkQsS0FBS0UsVUFDeEJuQyxFQUFRaUMsS0FBS0MsTUFBc0IsRUFBaEJELEtBQUtFLFVBSTVCLEtBQWlCLE1BQVZOLEdBQWdCLENBR3JCLElBRkEvQixFQUFRbUMsS0FBS0MsTUFBc0IsRUFBaEJELEtBQUtFLFVBQ3hCbkMsRUFBUWlDLEtBQUtDLE1BQXNCLEVBQWhCRCxLQUFLRSxXQUNoQlAsRUFBSzlDLE1BQU11RCxjQUFjckMsRUFBT0YsSUFDdENBLEVBQVFtQyxLQUFLQyxNQUFzQixFQUFoQkQsS0FBS0UsVUFDeEJuQyxFQUFRaUMsS0FBS0MsTUFBc0IsRUFBaEJELEtBQUtFLFVBTTFCLEdBSm9DLEdBQWhDUCxFQUFLOUMsTUFBTXdELG9CQUNiVCxFQUFTLFNBR0csTUFBVkEsRUFBZ0IsQ0FHbEIsSUFGQS9CLEVBQVFtQyxLQUFLQyxNQUFzQixFQUFoQkQsS0FBS0UsVUFDeEJuQyxFQUFRaUMsS0FBS0MsTUFBc0IsRUFBaEJELEtBQUtFLFdBQ2hCUixFQUFJN0MsTUFBTXVELGNBQWNyQyxFQUFPRixJQUNyQ0EsRUFBUW1DLEtBQUtDLE1BQXNCLEVBQWhCRCxLQUFLRSxVQUN4Qm5DLEVBQVFpQyxLQUFLQyxNQUFzQixFQUFoQkQsS0FBS0UsVUFFUyxHQUEvQlIsRUFBSTdDLE1BQU13RCxvQkFDWlQsRUFBUyxhQUtmLE9BQU9BLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9ib2FyZC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgdXNlciBmcm9tIFwiLi4vaW5kZXguanNcIjtcclxuXHJcbmxldCBzaGlwcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkNhcnJpZXJcIixcclxuICAgIGxlbmd0aDogNSxcclxuICAgIHBsYWNlZDogZmFsc2UsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhdHRsZXNoaXBcIixcclxuICAgIGxlbmd0aDogNCxcclxuICAgIHBsYWNlZDogZmFsc2UsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkNydWlzZXJcIixcclxuICAgIGxlbmd0aDogMyxcclxuICAgIHBsYWNlZDogZmFsc2UsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlN1Ym1hcmluZVwiLFxyXG4gICAgbGVuZ3RoOiAzLFxyXG4gICAgcGxhY2VkOiBmYWxzZSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiRGVzdHJveWVyXCIsXHJcbiAgICBsZW5ndGg6IDIsXHJcbiAgICBwbGFjZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbl07XHJcbmxldCBzaGlwSW5kZXggPSAwO1xyXG5mdW5jdGlvbiBlbXB0eVJlbmRlcihkaXYsIHBsYXllcikge1xyXG4gIGxldCBwYXJlbnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXYpO1xyXG4gIGxldCByb3dBcnIgPSBbXCJBXCIsIFwiQlwiLCBcIkNcIiwgXCJEXCIsIFwiRVwiLCBcIkZcIiwgXCJHXCJdO1xyXG4gIC8vT3V0ZXIgbG9vcCBpcyByb3dzLCBpbm5lciBsb29wIGlzIGNvbHVtbnNcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xyXG4gICAgbGV0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICByb3cuY2xhc3NOYW1lID0gXCJyb3dcIjtcclxuICAgIHJvdy5zZXRBdHRyaWJ1dGUoXCJZLUNvcmRcIiwgaSk7XHJcbiAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgIGxldCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBib3guY2xhc3NOYW1lID0gXCJib3hcIjtcclxuICAgICAgYm94LmlubmVyVGV4dCA9IFwiWS9YIFwiO1xyXG4gICAgICByb3cuYXBwZW5kQ2hpbGQoYm94KTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgODsgaisrKSB7XHJcbiAgICAgIGxldCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBib3guY2xhc3NOYW1lID0gXCJib3hcIjtcclxuICAgICAgYm94LnNldEF0dHJpYnV0ZShcIlgtQ29yZFwiLCBqKTtcclxuICAgICAgaWYgKGkgPT0gMCkge1xyXG4gICAgICAgIGlmIChqICE9PSA3KSB7XHJcbiAgICAgICAgICBib3guaW5uZXJUZXh0ID0gcm93QXJyW2pdO1xyXG4gICAgICAgICAgYm94LmlubmVyVGV4dCArPSBcIihcIiArIGogKyBcIilcIjtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoaiA9PSAwKSB7XHJcbiAgICAgICAgYm94LmlubmVyVGV4dCA9IGk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChqID09IDcgJiYgaSA9PSAwKSB7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGJveCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHBhcmVudERpdi5hcHBlbmRDaGlsZChyb3cpO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZyhwYXJlbnREaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJvd1wiKVsxXS5jaGlsZE5vZGVzWzBdKTtcclxufVxyXG5mdW5jdGlvbiBkZWxldGVCb2FyZChkaXYpIHtcclxuICBsZXQgcGFyZW50RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQWRkU2hpcHMoKSB7XHJcbiAgbGV0IHBhcmVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyXCIpO1xyXG4gIGxldCByb3dzID0gcGFyZW50RGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyb3dcIik7XHJcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgY3VyUm93ID0gcm93c1tpXTtcclxuICAgIGZvciAobGV0IGogPSAxOyBqIDwgY3VyUm93LmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgbGV0IGN1ckJveCA9IGN1clJvdy5jaGlsZE5vZGVzW2pdO1xyXG4gICAgICBjdXJCb3gucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uQWRkU2hpcENsaWNrKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuZnVuY3Rpb24gcmVmcmVzaEJvYXJkKGRpdiwgcGxheWVyLCBzaGlwKSB7XHJcbiAgbGV0IHBhcmVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdik7XHJcbiAgbGV0IHJvd3MgPSBwYXJlbnREaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJvd1wiKTtcclxuICBmb3IgKGxldCBpID0gMTsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCBjdXJSb3cgPSByb3dzW2ldO1xyXG4gICAgbGV0IGN1cllDb3JkID0gY3VyUm93LmdldEF0dHJpYnV0ZShcInktY29yZFwiKTtcclxuICAgIGZvciAobGV0IGogPSAxOyBqIDwgY3VyUm93LmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgbGV0IGN1ckJveCA9IGN1clJvdy5jaGlsZE5vZGVzW2pdO1xyXG4gICAgICBsZXQgY3VyWENvcmQgPSBjdXJCb3guZ2V0QXR0cmlidXRlKFwieC1jb3JkXCIpO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgcGxheWVyLmJvYXJkLmJvYXJkW2N1cllDb3JkIC0gMV1bY3VyWENvcmQgLSAxXSAhPT0gXCJlbXB0eVwiICYmXHJcbiAgICAgICAgcGxheWVyLmJvYXJkLmJvYXJkW2N1cllDb3JkIC0gMV1bY3VyWENvcmQgLSAxXSAhPT0gXCJtaXNzXCJcclxuICAgICAgKSB7XHJcbiAgICAgICAgY3VyQm94LmNsYXNzTGlzdC5hZGQoXCJzaGlwXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlbW92ZUFkZFNoaXBzKCk7XHJcbiAgc2hpcEluZGV4Kys7XHJcbiAgcGxhY2VTaGlwTGlzdGVuZXJzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsYWNlU2hpcExpc3RlbmVycygpIHtcclxuICBjb25zb2xlLmxvZyh1c2VyKTtcclxuICBsZXQgcGFyZW50RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJcIik7XHJcbiAgbGV0IHJvd3MgPSBwYXJlbnREaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJvd1wiKTtcclxuICAvL2xldCBkaXJlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyZWN0aW9uLXJhZGlvJykudmFsdWU7XHJcbiAgbGV0IGRpcmVjdGlvbiA9IFwiaG9yaXpvbnRhbFwiO1xyXG4gIC8vT3V0ZXIgaXRlcmF0ZXMgdGhyb3VnaCByb3dzLCBpbm5lciB0aHJvdWdoIGJveGVzIGluIHJvd1xyXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IGN1clJvdyA9IHJvd3NbaV07XHJcbiAgICBsZXQgY3VyWUNvcmQgPSBjdXJSb3cuZ2V0QXR0cmlidXRlKFwieS1jb3JkXCIpO1xyXG4gICAgZm9yIChsZXQgaiA9IDE7IGogPCBjdXJSb3cuY2hpbGROb2Rlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICBsZXQgY3VyQm94ID0gY3VyUm93LmNoaWxkTm9kZXNbal07XHJcbiAgICAgIGxldCBjdXJYQ29yZCA9IGN1ckJveC5nZXRBdHRyaWJ1dGUoXCJ4LWNvcmRcIik7XHJcbiAgICAgIGlmICh1c2VyLmJvYXJkLmJvYXJkW2N1cllDb3JkIC0gMV1bY3VyWENvcmQgLSAxXSA9PSBcImVtcHR5XCIpIHtcclxuICAgICAgICBjdXJCb3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uQWRkU2hpcENsaWNrKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25BZGRTaGlwQ2xpY2soKSB7XHJcbiAgbGV0IGRpcmVjdGlvbiA9IFwiaG9yaXpvbnRhbFwiO1xyXG4gIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldCk7XHJcbiAgaWYgKFxyXG4gICAgdXNlci5ib2FyZC5wbGFjZVNoaXAoXHJcbiAgICAgIGRpcmVjdGlvbixcclxuICAgICAgc2hpcHNbc2hpcEluZGV4XS5uYW1lLFxyXG4gICAgICBzaGlwc1tzaGlwSW5kZXhdLmxlbmd0aCxcclxuICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwieS1jb3JkXCIpIC0gMSxcclxuICAgICAgZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcIngtY29yZFwiKSAtIDFcclxuICAgICkgPT0gdHJ1ZVxyXG4gICkge1xyXG4gICAgcmVmcmVzaEJvYXJkKFwicGxheWVyXCIsIHVzZXIpO1xyXG4gIH1cclxufVxyXG5leHBvcnQgeyBlbXB0eVJlbmRlciwgcGxhY2VTaGlwTGlzdGVuZXJzIH07XHJcbiIsImltcG9ydCB7IGVtcHR5UmVuZGVyLCBwbGFjZVNoaXBMaXN0ZW5lcnMgfSBmcm9tIFwiLi9tb2R1bGVzL2JvYXJkXCI7XHJcbmZ1bmN0aW9uIGNyZWF0ZVNoaXAobmFtZSwgZGlyZWN0aW9uLCBsZW5ndGgsIHN0YXJ0aW5nQ29yZCwgZW5kaW5nQ29yZCkge1xyXG4gIHZhciBzaGlwID0ge307XHJcbiAgc2hpcC5uYW1lID0gbmFtZTtcclxuICBzaGlwLmxlbmd0aCA9IGxlbmd0aDtcclxuICBzaGlwLnN0YXJ0aW5nQ29yZCA9IHN0YXJ0aW5nQ29yZDtcclxuICBzaGlwLmVuZGluZ0NvcmQgPSBlbmRpbmdDb3JkO1xyXG4gIHNoaXAuaGVhbHRoID0gW107XHJcbiAgc2hpcC5zdW5rID0gZmFsc2U7XHJcbiAgc2hpcC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcblxyXG4gIGlmIChkaXJlY3Rpb24gPT0gXCJob3Jpem9udGFsXCIpIHtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHNoaXAuaGVhbHRoLnB1c2goe1xyXG4gICAgICAgIHNoaXBQb2ludDogaSxcclxuICAgICAgICBoaXRTdGF0dXM6IFwiZmFsc2VcIixcclxuICAgICAgICBjb29yZGluYXRlczoge1xyXG4gICAgICAgICAgeENvcmQ6IHN0YXJ0aW5nQ29yZC5zdGFydGluZ1hDb3JkICsgaSxcclxuICAgICAgICAgIHlDb3JkOiBzdGFydGluZ0NvcmQuc3RhcnRpbmdZQ29yZCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInZlcnRpY2FsXCIpIHtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHNoaXAuaGVhbHRoLnB1c2goe1xyXG4gICAgICAgIHNoaXBQb2ludDogaSxcclxuICAgICAgICBoaXRTdGF0dXM6IFwiZmFsc2VcIixcclxuICAgICAgICBjb29yZGluYXRlczoge1xyXG4gICAgICAgICAgeENvcmQ6IHN0YXJ0aW5nQ29yZC5zdGFydGluZ1hDb3JkLFxyXG4gICAgICAgICAgeUNvcmQ6IHN0YXJ0aW5nQ29yZC5zdGFydGluZ1lDb3JkICsgaSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNoaXAuaXNTdW5rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGlmICh0aGlzLmhlYWx0aFtqXS5oaXRTdGF0dXMgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5zdW5rID0gdHJ1ZTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH07XHJcblxyXG4gIHNoaXAuaGl0ID0gZnVuY3Rpb24gKGhpdFBvaW50KSB7XHJcbiAgICB0aGlzLmhlYWx0aFtoaXRQb2ludF0uaGl0U3RhdHVzID0gXCJ0cnVlXCI7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHNoaXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUdhbWVCb2FyZCgpIHtcclxuICB2YXIgZ2FtZUJvYXJkID0ge307XHJcbiAgZ2FtZUJvYXJkLnNoaXBzID0gW107XHJcbiAgZ2FtZUJvYXJkLmJvYXJkID0gW1xyXG4gICAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgXTtcclxuXHJcbiAgZ2FtZUJvYXJkLmNoZWNrRm9yVmFsaWRQbGFjZW1lbnQgPSBmdW5jdGlvbiAoc2hpcFRvUGxhY2UpIHtcclxuICAgIGxldCBzdGFydGluZ0NvbHVtbiA9IHNoaXBUb1BsYWNlLnN0YXJ0aW5nQ29yZC5zdGFydGluZ1hDb3JkO1xyXG4gICAgbGV0IHN0YXJ0aW5nUm93ID0gc2hpcFRvUGxhY2Uuc3RhcnRpbmdDb3JkLnN0YXJ0aW5nWUNvcmQ7XHJcbiAgICBsZXQgZW5kaW5nQ29sdW1uID0gc2hpcFRvUGxhY2UuZW5kaW5nQ29yZC5lbmRpbmdYQ29yZDtcclxuICAgIGxldCBlbmRpbmdSb3cgPSBzaGlwVG9QbGFjZS5lbmRpbmdDb3JkLmVuZGluZ1lDb3JkO1xyXG5cclxuICAgIGlmIChzaGlwVG9QbGFjZS5kaXJlY3Rpb24gPT0gXCJ2ZXJ0aWNhbFwiKSB7XHJcbiAgICAgIGlmIChzdGFydGluZ1JvdyA9PSA2KSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChlbmRpbmdSb3cgPiA2KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coc2hpcFRvUGxhY2UubmFtZSwgZW5kaW5nUm93KTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0aW5nUm93OyBpIDw9IGVuZGluZ1JvdzsgaSsrKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coc2hpcFRvUGxhY2UubmFtZSwgdGhpcy5ib2FyZFtpXVtzdGFydGluZ0NvbHVtbl0pO1xyXG4gICAgICAgIGlmICh0aGlzLmJvYXJkW2ldW3N0YXJ0aW5nQ29sdW1uXSAhPSBcImVtcHR5XCIpIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoc2hpcFRvUGxhY2UuZGlyZWN0aW9uID09IFwiaG9yaXpvbnRhbFwiKSB7XHJcbiAgICAgIGlmIChzdGFydGluZ0NvbHVtbiA9PSA2KSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChlbmRpbmdDb2x1bW4gPiA2KSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGogPSBzdGFydGluZ0NvbHVtbjsgaiA8PSBlbmRpbmdDb2x1bW47IGorKykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHNoaXBUb1BsYWNlLm5hbWUsIHRoaXMuYm9hcmRbc3RhcnRpbmdSb3ddW2pdKTtcclxuICAgICAgICBpZiAodGhpcy5ib2FyZFtzdGFydGluZ1Jvd11bal0gIT0gXCJlbXB0eVwiKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9O1xyXG5cclxuICBnYW1lQm9hcmQucGxhY2VTaGlwID0gZnVuY3Rpb24gKGRpcmVjdGlvbiwgbmFtZSwgbGVuZ3RoLCB5Q29yZCwgeENvcmQpIHtcclxuICAgIGxldCBlbmRpbmdDb3JkID0ge307XHJcbiAgICBsZXQgc3RhcnRpbmdDb3JkID0geyBzdGFydGluZ1hDb3JkOiB4Q29yZCwgc3RhcnRpbmdZQ29yZDogeUNvcmQgfTtcclxuXHJcbiAgICBpZiAoZGlyZWN0aW9uID09IFwiaG9yaXpvbnRhbFwiKSB7XHJcbiAgICAgIGVuZGluZ0NvcmQuZW5kaW5nWENvcmQgPSB4Q29yZCArIGxlbmd0aCAtIDE7XHJcbiAgICAgIGVuZGluZ0NvcmQuZW5kaW5nWUNvcmQgPSB5Q29yZDtcclxuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IFwidmVydGljYWxcIikge1xyXG4gICAgICBlbmRpbmdDb3JkLmVuZGluZ1hDb3JkID0geENvcmQ7XHJcbiAgICAgIGVuZGluZ0NvcmQuZW5kaW5nWUNvcmQgPSB5Q29yZCArIGxlbmd0aCAtIDE7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNoaXAgPSBjcmVhdGVTaGlwKG5hbWUsIGRpcmVjdGlvbiwgbGVuZ3RoLCBzdGFydGluZ0NvcmQsIGVuZGluZ0NvcmQpO1xyXG4gICAgaWYgKHRoaXMuY2hlY2tGb3JWYWxpZFBsYWNlbWVudChzaGlwKSA9PSBmYWxzZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBnYW1lQm9hcmQuc2hpcHMucHVzaChzaGlwKTtcclxuICAgICAgaWYgKGRpcmVjdGlvbiA9PSBcImhvcml6b250YWxcIikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBwbGFjZU9iaiA9IHtcclxuICAgICAgICAgICAgbmFtZTogc2hpcC5uYW1lLFxyXG4gICAgICAgICAgICBzcG90OiBzaGlwLmhlYWx0aFtpXSxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZCArIGldID0gcGxhY2VPYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInZlcnRpY2FsXCIpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgcGxhY2VPYmogPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IHNoaXAubmFtZSxcclxuICAgICAgICAgICAgc3BvdDogc2hpcC5oZWFsdGhbaV0sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdGhpcy5ib2FyZFt5Q29yZCArIGldW3hDb3JkXSA9IHBsYWNlT2JqO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgZ2FtZUJvYXJkLnJlY2VpdmVBdHRhY2sgPSBmdW5jdGlvbiAoeUNvcmQsIHhDb3JkKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuYm9hcmRbeUNvcmRdW3hDb3JkXSAhPT0gXCJlbXB0eVwiICYmXHJcbiAgICAgIHRoaXMuYm9hcmRbeUNvcmRdW3hDb3JkXSAhPT0gXCJtaXNzXCJcclxuICAgICkge1xyXG4gICAgICBsZXQgc2hpcE5hbWUgPSB0aGlzLmJvYXJkW3lDb3JkXVt4Q29yZF0ubmFtZTtcclxuICAgICAgbGV0IGZpbHRlcmVkQXJyID0gdGhpcy5zaGlwcy5maWx0ZXIoKHNoKSA9PiBzaC5uYW1lID09IHNoaXBOYW1lKTtcclxuICAgICAgbGV0IHNoaXAgPSBmaWx0ZXJlZEFyclswXTtcclxuICAgICAgbGV0IHBvaW50QXJyID0gc2hpcC5oZWFsdGguZmlsdGVyKFxyXG4gICAgICAgIChwb2ludCkgPT5cclxuICAgICAgICAgIHBvaW50LmNvb3JkaW5hdGVzLnhDb3JkID09PSB4Q29yZCAmJiBwb2ludC5jb29yZGluYXRlcy55Q29yZCA9PT0geUNvcmRcclxuICAgICAgKTtcclxuICAgICAgc2hpcC5oaXQocG9pbnRBcnJbMF0uc2hpcFBvaW50KTtcclxuICAgICAgc2hpcC5pc1N1bmsoKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuYm9hcmRbeUNvcmRdW3hDb3JkXSA9PSBcImVtcHR5XCIpIHtcclxuICAgICAgdGhpcy5ib2FyZFt5Q29yZF1beENvcmRdID0gXCJtaXNzXCI7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChcclxuICAgICAgdGhpcy5ib2FyZFt5Q29yZF1beENvcmRdID09IFwibWlzc1wiIHx8XHJcbiAgICAgIHRoaXMuYm9hcmRbeUNvcmRdW3hDb3JkXS5zcG90LmhpdFN0YXR1cyA9PSBcInRydWVcIlxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH07XHJcblxyXG4gIGdhbWVCb2FyZC5jaGVja0ZvckFsbFN1bmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2hpcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHRoaXMuc2hpcHNbaV0uc3VuayA9PSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIGdhbWVCb2FyZDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUGxheWVyKHR5cGUpIHtcclxuICBsZXQgcGxheWVyID0ge307XHJcbiAgcGxheWVyLnR5cGUgPSB0eXBlO1xyXG4gIHBsYXllci5ib2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpO1xyXG5cclxuICByZXR1cm4gcGxheWVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnYW1lTG9vcCgpIHtcclxuICBsZXQgaHVtID0gY3JlYXRlUGxheWVyKFwiaHVtYW5cIik7XHJcbiAgbGV0IGNvbXAgPSBjcmVhdGVQbGF5ZXIoXCJjb21wdXRlclwiKTtcclxuICBsZXQgd2lubmVyID0gbnVsbDtcclxuICBsZXQgdHVybkNvdW50ZXIgPSAxO1xyXG4gIGxldCBzaGlwTmFtZXMgPSBbXHJcbiAgICBcIkNhcnJpZXJcIixcclxuICAgIFwiQmF0dGxlc2hpcFwiLFxyXG4gICAgXCJDcnVpc2VyXCIsXHJcbiAgICBcIlN1Ym1hcmluZVwiLFxyXG4gICAgXCJEZXN0cm95ZXJcIixcclxuICBdO1xyXG4gIGxldCBzaGlwTGVuZ3RocyA9IFs1LCA0LCAzLCAzLCAyXTtcclxuICBsZXQgZGlyZWN0aW9ucyA9IFtcImhvcml6b250YWxcIiwgXCJ2ZXJ0aWNhbFwiXTtcclxuICBsZXQgeENvcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICBsZXQgeUNvcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICBsZXQgZGlyZWN0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMSk7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICB3aGlsZSAoXHJcbiAgICAgICFjb21wLmJvYXJkLnBsYWNlU2hpcChcclxuICAgICAgICBkaXJlY3Rpb25zW2RpcmVjdGlvbl0sXHJcbiAgICAgICAgc2hpcE5hbWVzW2ldLFxyXG4gICAgICAgIHNoaXBMZW5ndGhzW2ldLFxyXG4gICAgICAgIHlDb3JkLFxyXG4gICAgICAgIHhDb3JkXHJcbiAgICAgIClcclxuICAgICkge1xyXG4gICAgICB4Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gICAgICB5Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gICAgfVxyXG4gIH1cclxuICB4Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gIHlDb3JkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcblxyXG4gIGZvciAobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICB3aGlsZSAoXHJcbiAgICAgICFodW0uYm9hcmQucGxhY2VTaGlwKFxyXG4gICAgICAgIGRpcmVjdGlvbnNbZGlyZWN0aW9uXSxcclxuICAgICAgICBzaGlwTmFtZXNbal0sXHJcbiAgICAgICAgc2hpcExlbmd0aHNbal0sXHJcbiAgICAgICAgeUNvcmQsXHJcbiAgICAgICAgeENvcmRcclxuICAgICAgKVxyXG4gICAgKSB7XHJcbiAgICAgIHhDb3JkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgICAgIHlDb3JkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB3aGlsZSAod2lubmVyID09IG51bGwpIHtcclxuICAgIHhDb3JkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgICB5Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gICAgd2hpbGUgKCFjb21wLmJvYXJkLnJlY2VpdmVBdHRhY2soeUNvcmQsIHhDb3JkKSkge1xyXG4gICAgICB4Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gICAgICB5Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbXAuYm9hcmQuY2hlY2tGb3JBbGxTdW5rKCkgPT0gdHJ1ZSkge1xyXG4gICAgICB3aW5uZXIgPSBcIkh1bWFuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHdpbm5lciA9PSBudWxsKSB7XHJcbiAgICAgIHhDb3JkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgICAgIHlDb3JkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgICAgIHdoaWxlICghaHVtLmJvYXJkLnJlY2VpdmVBdHRhY2soeUNvcmQsIHhDb3JkKSkge1xyXG4gICAgICAgIHhDb3JkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgICAgICAgeUNvcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoaHVtLmJvYXJkLmNoZWNrRm9yQWxsU3VuaygpID09IHRydWUpIHtcclxuICAgICAgICB3aW5uZXIgPSBcIkNvbXB1dGVyXCI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB3aW5uZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRlc3RSZW5kZXIoKSB7XHJcbiAgbGV0IHNoaXBOYW1lcyA9IFtcclxuICAgIFwiQ2FycmllclwiLFxyXG4gICAgXCJCYXR0bGVzaGlwXCIsXHJcbiAgICBcIkNydWlzZXJcIixcclxuICAgIFwiU3VibWFyaW5lXCIsXHJcbiAgICBcIkRlc3Ryb3llclwiLFxyXG4gIF07XHJcbiAgbGV0IHNoaXBMZW5ndGhzID0gWzUsIDQsIDMsIDMsIDJdO1xyXG4gIGxldCBkaXJlY3Rpb25zID0gW1wiaG9yaXpvbnRhbFwiLCBcInZlcnRpY2FsXCJdO1xyXG4gIGxldCB4Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gIGxldCB5Q29yZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xyXG4gIGxldCBkaXJlY3Rpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKTtcclxuICBsZXQgcGxheWVyID0gY3JlYXRlUGxheWVyKFwiaHVtYW5cIik7XHJcbiAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGlwTmFtZXMubGVuZ3RoOyBqKyspIHtcclxuICAgIHdoaWxlIChcclxuICAgICAgIXBsYXllci5ib2FyZC5wbGFjZVNoaXAoXHJcbiAgICAgICAgZGlyZWN0aW9uc1tkaXJlY3Rpb25dLFxyXG4gICAgICAgIHNoaXBOYW1lc1tqXSxcclxuICAgICAgICBzaGlwTGVuZ3Roc1tqXSxcclxuICAgICAgICB5Q29yZCxcclxuICAgICAgICB4Q29yZFxyXG4gICAgICApXHJcbiAgICApIHtcclxuICAgICAgeENvcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICAgICAgeUNvcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcclxuICAgICAgZGlyZWN0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGxldCBwYXJlbnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllclwiKTtcclxuICBsZXQgcm93QXJyID0gW1wiQVwiLCBcIkJcIiwgXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCIsIFwiR1wiXTtcclxuICAvL091dGVyIGxvb3AgaXMgcm93cywgaW5uZXIgbG9vcCBpcyBjb2x1bW5zXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcclxuICAgIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgcm93LmNsYXNzTmFtZSA9IFwicm93XCI7XHJcbiAgICByb3cuc2V0QXR0cmlidXRlKFwiWS1Db3JkXCIsIGkpO1xyXG4gICAgaWYgKGkgPT0gMCkge1xyXG4gICAgICBsZXQgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgYm94LmNsYXNzTmFtZSA9IFwiYm94XCI7XHJcbiAgICAgIGJveC5pbm5lclRleHQgPSBcIlkvWCBcIjtcclxuICAgICAgcm93LmFwcGVuZENoaWxkKGJveCk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDg7IGorKykge1xyXG4gICAgICBsZXQgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgYm94LmNsYXNzTmFtZSA9IFwiYm94XCI7XHJcbiAgICAgIGJveC5zZXRBdHRyaWJ1dGUoXCJYLUNvcmRcIiwgaik7XHJcbiAgICAgIGlmIChpID09IDApIHtcclxuICAgICAgICBpZiAoaiAhPT0gNykge1xyXG4gICAgICAgICAgYm94LmlubmVyVGV4dCA9IHJvd0FycltqXTtcclxuICAgICAgICAgIGJveC5pbm5lclRleHQgKz0gXCIoXCIgKyBqICsgXCIpXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGogPT0gMCkge1xyXG4gICAgICAgIGJveC5pbm5lclRleHQgPSBpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChwbGF5ZXIuYm9hcmQuYm9hcmRbaSAtIDFdW2ogLSAxXSA9PSBcImVtcHR5XCIpIHtcclxuICAgICAgICAgIGJveC5pbm5lclRleHQgPSBwbGF5ZXIuYm9hcmQuYm9hcmRbaSAtIDFdW2ogLSAxXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYm94LmlubmVyVGV4dCA9IHBsYXllci5ib2FyZC5ib2FyZFtpIC0gMV1baiAtIDFdLm5hbWU7XHJcbiAgICAgICAgICBib3guY2xhc3NMaXN0LmFkZChcInNoaXBcIik7XHJcbiAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IHNoaXBOYW1lID0gcGxheWVyLmJvYXJkLmJvYXJkW2kgLSAxXVtqIC0gMV0ubmFtZTtcclxuICAgICAgICAgICAgbGV0IGZpbHRlcmVkQXJyID0gcGxheWVyLmJvYXJkLnNoaXBzLmZpbHRlcihcclxuICAgICAgICAgICAgICAoc2gpID0+IHNoLm5hbWUgPT0gc2hpcE5hbWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbGV0IHNoaXAgPSBmaWx0ZXJlZEFyclswXTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2hpcCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXllci5ib2FyZC5ib2FyZCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChqID09IDcgJiYgaSA9PSAwKSB7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGJveCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHBhcmVudERpdi5hcHBlbmRDaGlsZChyb3cpO1xyXG4gIH1cclxufVxyXG4vL3Rlc3RSZW5kZXIoKTtcclxuLy8gZ2FtZUxvb3AoKTtcclxubGV0IHNoaXBzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiQ2FycmllclwiLFxyXG4gICAgbGVuZ3RoOiA1LFxyXG4gICAgcGxhY2VkOiBmYWxzZSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmF0dGxlc2hpcFwiLFxyXG4gICAgbGVuZ3RoOiA0LFxyXG4gICAgcGxhY2VkOiBmYWxzZSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQ3J1aXNlclwiLFxyXG4gICAgbGVuZ3RoOiAzLFxyXG4gICAgcGxhY2VkOiBmYWxzZSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiU3VibWFyaW5lXCIsXHJcbiAgICBsZW5ndGg6IDMsXHJcbiAgICBwbGFjZWQ6IGZhbHNlLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJEZXN0cm95ZXJcIixcclxuICAgIGxlbmd0aDogMixcclxuICAgIHBsYWNlZDogZmFsc2UsXHJcbiAgfSxcclxuXTtcclxubGV0IHVzZXIgPSBjcmVhdGVQbGF5ZXIoXCJodW1hblwiKTtcclxuZW1wdHlSZW5kZXIoXCJwbGF5ZXJcIiwgdXNlcik7XHJcbmV4cG9ydCBkZWZhdWx0IHVzZXI7XHJcbnBsYWNlU2hpcExpc3RlbmVycygpO1xyXG5lbXB0eVJlbmRlcihcImd1ZXNzXCIpO1xyXG5cclxuZXhwb3J0cy5jcmVhdGVTaGlwID0gY3JlYXRlU2hpcDtcclxuZXhwb3J0cy5jcmVhdGVHYW1lQm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQ7XHJcbmV4cG9ydHMuZ2FtZUxvb3AgPSBnYW1lTG9vcDtcclxuXHJcbi8qXHJcbjJkIEFycmF5OlxyXG4gIHgtPiAgIDAgICAgICAgMSAgICAgICAgIDIgICAgICAgICAzICAgICAgIDQgICAgICAgNSAgICAgICA2XHJcbiAgICAwIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgMSBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIDIgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICAzIFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgNCBbXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiXSxcclxuICAgIDUgW1wiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIl0sXHJcbiAgICA2IFtcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCIsIFwiZW1wdHlcIiwgXCJlbXB0eVwiLCBcImVtcHR5XCJdLFxyXG4gICAgXlxyXG4gICAgeVxyXG4gICAgRWFjaCBuZXcgc3ViLWFycmF5IGlzIGEgeSBpbmNyZW1lbnRhdGlvblxyXG4gICAgRWFjaCBpbmRleCBpbnNpZGUgb2YgdGhlIHN1YmFycmF5IGlzIGEgeC0gaW5jcmVtZW50YXRpb25cclxuICAgIEJvYXJkIHdpbGwgYmUgeSA9IDAgZnJvbSB0aGUgdG9wIHggPSAwIGZyb20gdGhlIGxlZnRcclxuICAgIGJvYXJkW3Jvd11bY29sdW1uXVxyXG4qL1xyXG5cclxuLypcclxuICAgIFNoaXBzOlxyXG4gICAgQ2Fycmllci0gNVxyXG4gICAgQmF0dGxlc2hpcCAtIDRcclxuICAgIENydWlzZXIgLSAzXHJcbiAgICBTdWJtYXJpbmUgLSAzXHJcbiAgICBEZXN0cm95ZXIgLSAyXHJcblxyXG4qL1xyXG5cclxuLypcclxuXHJcbkZvciBjb21wdXRlciBndWVzc2VzczpcclxubGV0IHhHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG5sZXQgeUd1ZXNzID0gTWF0aC5yYW5kb20oNyk7XHJcbndoaWxlKCFwMS5ib2FyZC5yZWNlaXZlQXR0YWNrKHlHdWVzcywgeEd1ZXNzKSlcclxue1xyXG4gIHhHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG4gIHlHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG59XHJcblxyXG5Gb3IgZ2FtZSBsb29wXCJcclxubGV0IHR1cm5Db3VudGVyID0gMTtcclxubGV0IHdpbm5lciA9IG51bGw7XHJcbndoaWxlKHdpbm5lciA9PSBudWxsKVxyXG57XHJcbiAgaWYodHVybkNvdW50ZXIlMiA9PSApXHJcbiAge1xyXG4gICAgZ2V0IGd1ZXNzIHZhbHVlc1xyXG4gICAgd2hpbGUoIXAyLmJvYXJkLnJlY2VpdmVBdHRhY2sodmFsdWVzKSlcclxuICAgIHtcclxuICAgICAgdXBkYXRlIGd1ZXNzIHZhbHVlc1xyXG4gICAgfVxyXG4gICAgY2hlY2sgZm9yIGFsbCBzdW5rXHJcbiAgfWVsc2V7XHJcbmxldCB4R3Vlc3MgPSBNYXRoLnJhbmRvbSg3KTtcclxubGV0IHlHdWVzcyA9IE1hdGgucmFuZG9tKDcpO1xyXG53aGlsZSghcDEuYm9hcmQucmVjZWl2ZUF0dGFjayh5R3Vlc3MsIHhHdWVzcykpXHJcbntcclxuICB4R3Vlc3MgPSBNYXRoLnJhbmRvbSg3KTtcclxuICB5R3Vlc3MgPSBNYXRoLnJhbmRvbSg3KTtcclxufVxyXG5jaGVjayBmb3IgYWxsIHN1bmtcclxuICB9XHJcbiAgdHVybkNvdW50ZXIrKztcclxufVxyXG5cclxuXHJcblxyXG5OZWVkIGEgd2F5IHRvIHdhaXQgZm9yIG5ldyB2YWx1ZXMgaWYgZ3Vlc3MgZnJvbSB1c2VyIGlzIGludmFsaWRcclxuTWF5YmUgYW4gb25jbGljayBtZXRob2QgdGhhdCBzZW5kcyB2YWx1ZXNcclxuTmVlZCBhIHdheSB0byBnZXQgcmV0dXJuIGZyb20gY2hlY2sgaWYgYWxsIGFyZSBzdW5rPyBNYXliZSByZW1vdmUgaXQgZnJvbSByZWNlaXZlXHJcbmF0dGFjayBhbmQgY2FsbCBpdCBhZnRlciBldmVyeSB0dXJuIFxyXG5cclxuKi9cclxuXHJcbi8qXHJcbi1SZW5kZXIgZW1wdHkgYm9hcmRcclxuLU5lZWQgYSB3YXkgdG8gdHJhY2sgd2hpY2ggc3F1YXJlIGlzIGdldHRpbmcgY2xpY2tlZCBpbiByZWxhdGlvbiB0byB0aGUgMmQgYXJyYXlcclxuLVJlbmRlciBib2FyZCBhZnRlciBwbGFjaW5nIGVhY2ggc2hpcCB3L2Egc2hpcCBtYXJrZXJcclxuLVVwZGF0ZSBzcXVhcmVzIGFmdGVyIGVhY2ggZ3Vlc3Mgb24gZWFjaCBzaWRlLiBcclxuLU1heWJlIHVzZSBnZXQgc291cmNlIHRvIGdldCAyZCBhcnJheSBjb29yZGluYXRlc1xyXG5cclxuXHJcbiovXHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNoaXBzIiwibmFtZSIsImxlbmd0aCIsInBsYWNlZCIsInNoaXBJbmRleCIsImVtcHR5UmVuZGVyIiwiZGl2IiwicGxheWVyIiwicGFyZW50RGl2IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInJvd0FyciIsImkiLCJyb3ciLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwic2V0QXR0cmlidXRlIiwiYm94IiwiaW5uZXJUZXh0IiwiYXBwZW5kQ2hpbGQiLCJqIiwiY29uc29sZSIsImxvZyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjaGlsZE5vZGVzIiwicGxhY2VTaGlwTGlzdGVuZXJzIiwicm93cyIsImN1clJvdyIsImN1cllDb3JkIiwiZ2V0QXR0cmlidXRlIiwiY3VyQm94IiwiY3VyWENvcmQiLCJhZGRFdmVudExpc3RlbmVyIiwib25BZGRTaGlwQ2xpY2siLCJldmVudCIsInRhcmdldCIsInBhcmVudE5vZGUiLCJzaGlwIiwiYm9hcmQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlQWRkU2hpcHMiLCJyZWZyZXNoQm9hcmQiLCJjcmVhdGVTaGlwIiwiZGlyZWN0aW9uIiwic3RhcnRpbmdDb3JkIiwiZW5kaW5nQ29yZCIsImhlYWx0aCIsInN1bmsiLCJwdXNoIiwic2hpcFBvaW50IiwiaGl0U3RhdHVzIiwiY29vcmRpbmF0ZXMiLCJ4Q29yZCIsInN0YXJ0aW5nWENvcmQiLCJ5Q29yZCIsInN0YXJ0aW5nWUNvcmQiLCJpc1N1bmsiLCJ0aGlzIiwiaGl0IiwiaGl0UG9pbnQiLCJjcmVhdGVHYW1lQm9hcmQiLCJnYW1lQm9hcmQiLCJzaGlwVG9QbGFjZSIsInN0YXJ0aW5nQ29sdW1uIiwic3RhcnRpbmdSb3ciLCJlbmRpbmdDb2x1bW4iLCJlbmRpbmdYQ29yZCIsImVuZGluZ1JvdyIsImVuZGluZ1lDb3JkIiwiY2hlY2tGb3JWYWxpZFBsYWNlbWVudCIsInBsYWNlT2JqIiwic3BvdCIsInNoaXBOYW1lIiwiZmlsdGVyIiwic2giLCJwb2ludEFyciIsInBvaW50IiwiY3JlYXRlUGxheWVyIiwidHlwZSIsInVzZXIiLCJnYW1lTG9vcCIsImh1bSIsImNvbXAiLCJ3aW5uZXIiLCJzaGlwTmFtZXMiLCJzaGlwTGVuZ3RocyIsImRpcmVjdGlvbnMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwbGFjZVNoaXAiLCJyZWNlaXZlQXR0YWNrIiwiY2hlY2tGb3JBbGxTdW5rIl0sInNvdXJjZVJvb3QiOiIifQ==